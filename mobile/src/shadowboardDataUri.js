export const SHADOWBOARD_DATA_URI = "data:text/html;base64,PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ii8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIi8+Cjx0aXRsZT5TaGFkb3dCb2FyZCBNb2JpbGU8L3RpdGxlPgo8c3R5bGU+OnJvb3QgewogIC0tYmc6ICMxYTFhMWY7CiAgLS1wYW5lbDogcmdiYSgyMywgMjMsIDI4LCAwLjg4KTsKICAtLWxpbmU6IHJnYmEoMTM4LCAxMzgsIDE1MCwgMC4yMik7CiAgLS1hY2NlbnQ6ICM4YThhOTY7CiAgLS10ZXh0OiAjZWNlY2YxOwogIC0tbXV0ZWQ6ICM5YzljYTg7CiAgLS13YXJuOiAjYzY2YTZhOwogIC0tb2s6ICM3OWIyODc7Cn0KCiogewogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCmJvZHkgewogIG1hcmdpbjogMDsKICBmb250LWZhbWlseTogSW50ZXIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgc2Fucy1zZXJpZjsKICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IHRvcCByaWdodCwgIzIzMjMyYiAwJSwgIzFhMWExZiA2MCUpOwogIGNvbG9yOiB2YXIoLS10ZXh0KTsKICBtaW4taGVpZ2h0OiAxMDB2aDsKfQoKLmdyaWQtb3ZlcmxheSB7CiAgcG9zaXRpb246IGZpeGVkOwogIGluc2V0OiAwOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh2YXIoLS1saW5lKSAxcHgsIHRyYW5zcGFyZW50IDFweCksIGxpbmVhci1ncmFkaWVudCg5MGRlZywgdmFyKC0tbGluZSkgMXB4LCB0cmFuc3BhcmVudCAxcHgpOwogIGJhY2tncm91bmQtc2l6ZTogMzZweCAzNnB4OwogIG9wYWNpdHk6IDAuMjU7CiAgei1pbmRleDogMDsKfQoKLnZhdWx0LW92ZXJsYXkgewogIHBvc2l0aW9uOiBmaXhlZDsKICBpbnNldDogMDsKICBkaXNwbGF5OiBub25lOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDAuNXJlbTsKICBjb2xvcjogI2M2YzZkMDsKICBsZXR0ZXItc3BhY2luZzogMC4wOGVtOwogIHotaW5kZXg6IDIwOwp9CgoudmF1bHQtb3ZlcmxheSB7CiAgYmFja2dyb3VuZDogcmdiYSgxMiwgMTIsIDE1LCAwLjgyKTsKICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNnB4KTsKfQoKLmNvbmNlYWwtYmFkZ2UgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDE0cHg7CiAgcmlnaHQ6IDE0cHg7CiAgei1pbmRleDogMzA7CiAgZGlzcGxheTogbm9uZTsKICBwYWRkaW5nOiAwLjM1cmVtIDAuNnJlbTsKICBib3JkZXItcmFkaXVzOiA5OTlweDsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDIwMCwgMjAwLCAyMDgsIDAuMzYpOwogIGJhY2tncm91bmQ6IHJnYmEoMjAsIDIwLCAyNCwgMC44KTsKICBjb2xvcjogI2Q3ZDdkZjsKICBmb250LXNpemU6IDAuNzJyZW07CiAgbGV0dGVyLXNwYWNpbmc6IDAuMWVtOwp9CgoudmF1bHQtbG9ja2VkIC52YXVsdC1vdmVybGF5IHsKICBkaXNwbGF5OiBmbGV4Owp9CgouY29uY2VhbGVkIG1haW4sCi5jb25jZWFsZWQgLmFwcC1oZWFkZXIsCi5jb25jZWFsZWQgLnRvcC1uYXYsCi5jb25jZWFsZWQgLnZhdWx0LXN0YXR1cywKLmNvbmNlYWxlZCAuZ3JpZC1vdmVybGF5LAouY29uY2VhbGVkIC5taXNzaW9uLWRyYXdlciwKLmNvbmNlYWxlZCAuZHJhd2VyLWJhY2tkcm9wLAoudmF1bHQtbG9ja2VkIG1haW4sCi52YXVsdC1sb2NrZWQgLnZhdWx0LXN0YXR1cyB7CiAgZmlsdGVyOiBibHVyKDE2cHgpOwp9CgouY29uY2VhbGVkIG1haW4sCi5jb25jZWFsZWQgLmFwcC1oZWFkZXIsCi5jb25jZWFsZWQgLnRvcC1uYXYsCi5jb25jZWFsZWQgLnZhdWx0LXN0YXR1cywKLmNvbmNlYWxlZCAubWlzc2lvbi1kcmF3ZXIsCi5jb25jZWFsZWQgLmRyYXdlci1iYWNrZHJvcCwKLnZhdWx0LWxvY2tlZCBtYWluLAoudmF1bHQtbG9ja2VkIC52YXVsdC1zdGF0dXMgewogIHBvaW50ZXItZXZlbnRzOiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwp9CgouY29uY2VhbGVkIC5jb25jZWFsLWJhZGdlIHsKICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouYXBwLWhlYWRlciwKLmxheW91dCwKLnZhdWx0LXN0YXR1cywKLnRvcC1uYXYgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB6LWluZGV4OiAyOwp9CgouYXBwLWhlYWRlciB7CiAgcGFkZGluZzogMS4xcmVtIDFyZW0gMC42cmVtOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZ2FwOiAxcmVtOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1saW5lKTsKfQoKLmhlYWRlci1hY3Rpb25zIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZ2FwOiAwLjZyZW07Cn0KCi52YXVsdC1jb250cm9scyB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGdhcDogMC40NXJlbTsKfQoKLnZhdWx0LWNvbnRyb2xzIGlucHV0IHsKICB3aWR0aDogMTkwcHg7Cn0KCi52YXVsdC1zdGF0dXMgewogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwIDFyZW07CiAgY29sb3I6IHZhcigtLW11dGVkKTsKICBmb250LXNpemU6IDAuOHJlbTsKICBtaW4taGVpZ2h0OiAxLjJyZW07Cn0KCi50b3AtbmF2IHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogMC41cmVtOwogIHBhZGRpbmc6IDAuMzVyZW0gMXJlbSAwOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1saW5lKTsKfQoKLm5hdi1idG4gewogIGJvcmRlci1yYWRpdXM6IDlweCA5cHggMCAwOwogIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1ib3R0b206IG5vbmU7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgY29sb3I6IHZhcigtLW11dGVkKTsKICBwYWRkaW5nOiAwLjU1cmVtIDAuOHJlbTsKICBmb250LXNpemU6IDAuODZyZW07Cn0KCi5uYXYtYnRuLmFjdGl2ZSB7CiAgYmFja2dyb3VuZDogcmdiYSgxMzgsIDEzOCwgMTUwLCAwLjE2KTsKICBib3JkZXItY29sb3I6IHZhcigtLWxpbmUpOwogIGNvbG9yOiB2YXIoLS10ZXh0KTsKfQoKaDEsCmgyLApoMywKcCB7CiAgbWFyZ2luOiAwOwp9CgpoMSB7CiAgZm9udC1zaXplOiAxLjQ1cmVtOwogIGxldHRlci1zcGFjaW5nOiAwLjAyZW07Cn0KCi5hcHAtaGVhZGVyIHAgewogIGNvbG9yOiB2YXIoLS1tdXRlZCk7CiAgZm9udC1zaXplOiAwLjlyZW07CiAgbWFyZ2luLXRvcDogMC4ycmVtOwp9CgoubGF5b3V0IHsKICBwYWRkaW5nOiAxcmVtOwogIGRpc3BsYXk6IGJsb2NrOwp9CgoucGFuZWwgewogIGJhY2tncm91bmQ6IHZhcigtLXBhbmVsKTsKICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saW5lKTsKICBib3JkZXItcmFkaXVzOiAxMnB4OwogIHBhZGRpbmc6IDFyZW07CiAgbWFyZ2luLWJvdHRvbTogMXJlbTsKfQoKLnBhbmVsLWhlYWQgewogIG1hcmdpbi1ib3R0b206IDAuOXJlbTsKfQoKLnBhbmVsLWhlYWQgcCB7CiAgbWFyZ2luLXRvcDogMC4ycmVtOwogIGNvbG9yOiB2YXIoLS1tdXRlZCk7CiAgZm9udC1zaXplOiAwLjg2cmVtOwp9Cgouc3BsaXQtcGFuZWwgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ2FwOiAxcmVtOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOwp9CgouaGlkZGVuLXZpZXcgewogIGRpc3BsYXk6IG5vbmU7Cn0KCi5rcGktZ3JpZCB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg0LCBtaW5tYXgoMCwgMWZyKSk7CiAgZ2FwOiAwLjdyZW07CiAgbWFyZ2luLWJvdHRvbTogMC45cmVtOwp9Cgoua3BpLWNhcmQgewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpbmUpOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgYmFja2dyb3VuZDogcmdiYSgxOCwgMTgsIDIzLCAwLjcpOwogIHBhZGRpbmc6IDAuNzVyZW0gMC44cmVtOwogIGRpc3BsYXk6IGdyaWQ7CiAgZ2FwOiAwLjM1cmVtOwp9Cgoua3BpLWNhcmQgc21hbGwgewogIGNvbG9yOiB2YXIoLS1tdXRlZCk7CiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICBsZXR0ZXItc3BhY2luZzogMC4wN2VtOwogIGZvbnQtc2l6ZTogMC42OHJlbTsKfQoKLmtwaS1jYXJkIHN0cm9uZyB7CiAgZm9udC1zaXplOiAxLjdyZW07CiAgZm9udC13ZWlnaHQ6IDYwMDsKfQoKLmRhc2hib2FyZC1ncmlkIHsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMmZyIDFmcjsKICBnYXA6IDAuODVyZW07Cn0KCi5kYXNoYm9hcmQtYmxvY2sgewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpbmUpOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgYmFja2dyb3VuZDogcmdiYSgxOCwgMTgsIDIzLCAwLjcpOwogIHBhZGRpbmc6IDAuOHJlbTsKfQoKLmRhc2hib2FyZC1ibG9jayBoMyB7CiAgZm9udC1zaXplOiAwLjg4cmVtOwogIG1hcmdpbi1ib3R0b206IDAuNnJlbTsKICBjb2xvcjogI2Q1ZDVkZTsKfQoKLmRhc2hib2FyZC1zdWJoZWFkIHsKICBtYXJnaW4tdG9wOiAxcmVtOwp9CgouZGFzaGJvYXJkLWxpc3QgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ2FwOiAwLjQ1cmVtOwp9CgouZGFzaGJvYXJkLXJvdyB7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGluZSk7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIHBhZGRpbmc6IDAuNDVyZW0gMC41NXJlbTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGdhcDogMC41NXJlbTsKICBmb250LXNpemU6IDAuODJyZW07Cn0KCi5kYXNoYm9hcmQtcm93IHNtYWxsIHsKICBjb2xvcjogdmFyKC0tbXV0ZWQpOwp9CgouZGFzaGJvYXJkLXJvdy5jbGlja2FibGUgewogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmRhc2hib2FyZC1yb3cuY2xpY2thYmxlOmhvdmVyIHsKICBib3JkZXItY29sb3I6IHJnYmEoMTM4LCAxMzgsIDE1MCwgMC40NSk7CiAgYmFja2dyb3VuZDogcmdiYSgxMzgsIDEzOCwgMTUwLCAwLjA4KTsKfQoKLmxldmVyLWJhcnMgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ2FwOiAwLjQ1cmVtOwp9CgoubGV2ZXItcm93IHsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogODhweCAxZnIgMzBweDsKICBnYXA6IDAuNDVyZW07CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBmb250LXNpemU6IDAuNzhyZW07Cn0KCi5sZXZlci1yb3cgc3BhbiB7CiAgY29sb3I6IHZhcigtLW11dGVkKTsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07Cn0KCi5sZXZlci10cmFjayB7CiAgaGVpZ2h0OiA3cHg7CiAgYm9yZGVyLXJhZGl1czogOTk5cHg7CiAgYmFja2dyb3VuZDogcmdiYSgxMzgsIDEzOCwgMTUwLCAwLjE2KTsKICBvdmVyZmxvdzogaGlkZGVuOwp9CgoubGV2ZXItZmlsbCB7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzZkN2E4ZCwgIzlhYTRiOCk7Cn0KCi5kcmF3ZXItYmFja2Ryb3AgewogIHBvc2l0aW9uOiBmaXhlZDsKICBpbnNldDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDEwLCAxMCwgMTMsIDAuNDIpOwogIHotaW5kZXg6IDI1Owp9CgoubWlzc2lvbi1kcmF3ZXIgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDA7CiAgcmlnaHQ6IDA7CiAgd2lkdGg6IG1pbig3NjBweCwgMTAwdncpOwogIGhlaWdodDogMTAwdmg7CiAgYmFja2dyb3VuZDogcmdiYSgxOCwgMTgsIDIzLCAwLjk2KTsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLWxpbmUpOwogIHotaW5kZXg6IDI2OwogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsKICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTYwbXMgZWFzZS1vdXQ7CiAgcGFkZGluZzogMXJlbTsKICBvdmVyZmxvdzogYXV0bzsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQoKYm9keS5kcmF3ZXItb3BlbiAubWlzc2lvbi1kcmF3ZXIgewogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKICBwb2ludGVyLWV2ZW50czogYXV0bzsKfQoKLmRyYXdlci1oZWFkIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICBnYXA6IDAuOHJlbTsKICBtYXJnaW4tYm90dG9tOiAwLjlyZW07Cn0KCi5kcmF3ZXItZ3JpZCB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDEuNmZyIDFmcjsKICBnYXA6IDFyZW07Cn0KCi5taXNzaW9uLWRyYXdlciBoMyB7CiAgZm9udC1zaXplOiAwLjg4cmVtOwogIG1hcmdpbjogMC4xNXJlbSAwIDAuNTVyZW07CiAgY29sb3I6ICNkNWQ1ZGU7Cn0KCi5zdGFjay1mb3JtIHsKICBkaXNwbGF5OiBncmlkOwogIGdhcDogMC42NXJlbTsKICBtYXJnaW4tYm90dG9tOiAwLjlyZW07Cn0KCi5zdGFjay1mb3JtLnJvdyB7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIGF1dG87Cn0KCmxhYmVsIHsKICBkaXNwbGF5OiBncmlkOwogIGdhcDogMC4zNXJlbTsKICBjb2xvcjogI2QwZDBkNzsKICBmb250LXNpemU6IDAuODRyZW07Cn0KCmlucHV0LApzZWxlY3QsCmJ1dHRvbiB7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMTM4LCAxMzgsIDE1MCwgMC4zNik7CiAgYmFja2dyb3VuZDogcmdiYSgzMCwgMzAsIDM2LCAwLjgyKTsKICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgcGFkZGluZzogMC41NXJlbSAwLjY1cmVtOwogIGZvbnQtc2l6ZTogMC45cmVtOwp9CgppbnB1dDpmb2N1cywKc2VsZWN0OmZvY3VzLApidXR0b246Zm9jdXMgewogIG91dGxpbmU6IG5vbmU7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDEzOCwgMTM4LCAxNTAsIDAuNzgpOwp9CgpidXR0b24gewogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDEzOCwgMTM4LCAxNTAsIDAuMik7Cn0KCmJ1dHRvbjpob3ZlciB7CiAgYmFja2dyb3VuZDogcmdiYSgxMzgsIDEzOCwgMTUwLCAwLjMpOwp9CgouZ2hvc3QtYnRuIHsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CgoubWlzc2lvbnMtbGlzdCB7CiAgZGlzcGxheTogZ3JpZDsKICBnYXA6IDAuOHJlbTsKfQoKLm1pc3Npb24tY2FyZCB7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGluZSk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBwYWRkaW5nOiAwLjhyZW07CiAgZGlzcGxheTogZ3JpZDsKICBnYXA6IDAuNjVyZW07CiAgYmFja2dyb3VuZDogcmdiYSgxOCwgMTgsIDIzLCAwLjcpOwp9CgoubWlzc2lvbi10b3AgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZ2FwOiAwLjZyZW07Cn0KCi5waWxsIHsKICBmb250LXNpemU6IDAuNzJyZW07CiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saW5lKTsKICBib3JkZXItcmFkaXVzOiA5OTlweDsKICBwYWRkaW5nOiAwLjJyZW0gMC41cmVtOwogIGNvbG9yOiAjZDdkN2RlOwp9CgoubWV0YSB7CiAgY29sb3I6IHZhcigtLW11dGVkKTsKICBmb250LXNpemU6IDAuNzhyZW07Cn0KCi5jb21wYWN0LWlubGluZSB7CiAgZGlzcGxheTogZ3JpZDsKICBnYXA6IDAuNDVyZW07CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgYXV0bzsKfQoKLm1vdmUtZm9ybS5jb21wYWN0LWlubGluZSB7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgYXV0byBhdXRvIGF1dG87Cn0KCi5waGFzZXMsCi5tb3ZlcywKLnJpc2stbGlzdCB7CiAgZGlzcGxheTogZ3JpZDsKICBnYXA6IDAuNHJlbTsKfQoKLnBoYXNlLXJvdywKLm1vdmUtcm93LAoucmlzay1yb3cgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZ2FwOiAwLjZyZW07CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGluZSk7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIHBhZGRpbmc6IDAuNHJlbSAwLjVyZW07CiAgZm9udC1zaXplOiAwLjgycmVtOwp9CgoucGhhc2Utcm93IHNtYWxsLAoubW92ZS1yb3cgc21hbGwsCi5yaXNrLXJvdyBzbWFsbCB7CiAgY29sb3I6IHZhcigtLW11dGVkKTsKfQoKLmFjdGlvbi1yb3cgewogIGRpc3BsYXk6IGZsZXg7CiAgZ2FwOiAwLjM1cmVtOwp9CgouYWN0aW9uLXJvdyBidXR0b24gewogIHBhZGRpbmc6IDAuM3JlbSAwLjVyZW07CiAgZm9udC1zaXplOiAwLjc1cmVtOwp9CgoubWV0cmljLWxpbmUsCi5yaXNrLW1ldHJpY3MgcCB7CiAgbWFyZ2luLXRvcDogMC40cmVtOwogIGNvbG9yOiAjY2JjYmNmOwogIGZvbnQtc2l6ZTogMC44NXJlbTsKfQoKLnJpc2stZ3JpZCB7CiAgbWFyZ2luLXRvcDogMC43cmVtOwogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMTAsIDFmcik7CiAgZ2FwOiAycHg7Cn0KCi5yaXNrLWNlbGwgewogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmctdG9wOiAxMDAlOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDEzOCwgMTM4LCAxNTAsIDAuMTQpOwogIGJhY2tncm91bmQ6IHJnYmEoMTM4LCAxMzgsIDE1MCwgMC4wNCk7Cn0KCi5yaXNrLWNlbGwuYWN0aXZlIHsKICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDE5OCwgMTA2LCAxMDYsIDAuMzUpLCByZ2JhKDE5OCwgMTA2LCAxMDYsIDAuNjYpKTsKfQoKLm1vbWVudHVtLWJhcnMgewogIG1hcmdpbi10b3A6IDAuOHJlbTsKICBkaXNwbGF5OiBncmlkOwogIGdhcDogMC40cmVtOwp9CgouYmFyIHsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNzhweCAxZnIgMzZweDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGdhcDogMC40NXJlbTsKICBmb250LXNpemU6IDAuOHJlbTsKfQoKLmJhciBzcGFuIHsKICBjb2xvcjogdmFyKC0tbXV0ZWQpOwp9CgouYmFyLXRyYWNrIHsKICBoZWlnaHQ6IDhweDsKICBib3JkZXItcmFkaXVzOiA5OTlweDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGJhY2tncm91bmQ6IHJnYmEoMTM4LCAxMzgsIDE1MCwgMC4xNik7Cn0KCi5iYXItZmlsbCB7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzc3Nzc4NSwgI2IwYjBiZSk7Cn0KCi53YXJuIHsKICBjb2xvcjogdmFyKC0td2FybikgIWltcG9ydGFudDsKfQoKLmdvb2QgewogIGNvbG9yOiB2YXIoLS1vaykgIWltcG9ydGFudDsKfQoKQG1lZGlhIChtaW4td2lkdGg6IDk4MHB4KSB7CiAgLnNwbGl0LXBhbmVsIHsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOwogIH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6IDkyMHB4KSB7CiAgLmFwcC1oZWFkZXIgewogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogIH0KCiAgLmhlYWRlci1hY3Rpb25zLAogIC52YXVsdC1jb250cm9scyB7CiAgICB3aWR0aDogMTAwJTsKICAgIGZsZXgtd3JhcDogd3JhcDsKICB9CgogIC52YXVsdC1jb250cm9scyBpbnB1dCB7CiAgICBmbGV4OiAxOwogICAgd2lkdGg6IGF1dG87CiAgICBtaW4td2lkdGg6IDE2MHB4OwogIH0KCiAgLmtwaS1ncmlkIHsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICB9CgogIC5kYXNoYm9hcmQtZ3JpZCB7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICB9CgogIC5kcmF3ZXItZ3JpZCB7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA3MjBweCkgewogIC5zdGFjay1mb3JtLnJvdywKICAubW92ZS1mb3JtLmNvbXBhY3QtaW5saW5lLAogIC5jb21wYWN0LWlubGluZSB7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICB9CgogIC5iYXIgewogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA2NXB4IDFmciAzMHB4OwogIH0KCiAgLnRvcC1uYXYgewogICAgb3ZlcmZsb3cteDogYXV0bzsKICB9CgogIC5rcGktZ3JpZCB7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICB9Cn0KPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9ImdyaWQtb3ZlcmxheSIgYXJpYS1oaWRkZW49InRydWUiPjwvZGl2PgoKICAgIDxkaXYgaWQ9ImNvbmNlYWwtYmFkZ2UiIGNsYXNzPSJjb25jZWFsLWJhZGdlIiBhcmlhLWhpZGRlbj0idHJ1ZSI+Q0VOQ0VSRUQ8L2Rpdj4KCiAgICA8ZGl2IGlkPSJ2YXVsdC1vdmVybGF5IiBjbGFzcz0idmF1bHQtb3ZlcmxheSIgYXJpYS1oaWRkZW49InRydWUiPgogICAgICA8cD5WQVVMVCBMT0NLRUQ8L3A+CiAgICAgIDxzbWFsbD5FbnRlciBwYXNzcGhyYXNlIHRvIGFjY2VzcyBTaGFkb3dCb2FyZDwvc21hbGw+CiAgICA8L2Rpdj4KCiAgICA8aGVhZGVyIGNsYXNzPSJhcHAtaGVhZGVyIj4KICAgICAgPGRpdj4KICAgICAgICA8aDE+U2hhZG93Qm9hcmQ8L2gxPgogICAgICAgIDxwPlByaXZhdGUgU3RyYXRlZ2ljIFdhciBSb29tPC9wPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1hY3Rpb25zIj4KICAgICAgICA8YnV0dG9uIGlkPSJlc2NhcGUtdG9nZ2xlIiBjbGFzcz0iZ2hvc3QtYnRuIiB0eXBlPSJidXR0b24iPkNvbmNlYWwgKEVzYyk8L2J1dHRvbj4KCiAgICAgICAgPGZvcm0gaWQ9InZhdWx0LWZvcm0iIGNsYXNzPSJ2YXVsdC1jb250cm9scyI+CiAgICAgICAgICA8aW5wdXQgaWQ9InZhdWx0LXBhc3NwaHJhc2UiIHR5cGU9InBhc3N3b3JkIiBhdXRvY29tcGxldGU9ImN1cnJlbnQtcGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJWYXVsdCBwYXNzcGhyYXNlIiBtaW5sZW5ndGg9IjgiIHJlcXVpcmVkIC8+CiAgICAgICAgICA8YnV0dG9uIGlkPSJ2YXVsdC1wcmltYXJ5IiB0eXBlPSJzdWJtaXQiPlVubG9jazwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiBpZD0idmF1bHQtbG9jayIgdHlwZT0iYnV0dG9uIiBoaWRkZW4+TG9jazwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiBpZD0idmF1bHQtcm90YXRlIiB0eXBlPSJidXR0b24iIGhpZGRlbj5Sb3RhdGUgS2V5PC9idXR0b24+CiAgICAgICAgPC9mb3JtPgogICAgICA8L2Rpdj4KICAgIDwvaGVhZGVyPgoKICAgIDxwIGlkPSJ2YXVsdC1zdGF0dXMiIGNsYXNzPSJ2YXVsdC1zdGF0dXMiIHJvbGU9InN0YXR1cyIgYXJpYS1saXZlPSJwb2xpdGUiPjwvcD4KCiAgICA8bmF2IGNsYXNzPSJ0b3AtbmF2IiBhcmlhLWxhYmVsPSJTaGFkb3dCb2FyZCBTZWN0aW9ucyI+CiAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4gYWN0aXZlIiBkYXRhLXZpZXc9ImRhc2hib2FyZCIgdHlwZT0iYnV0dG9uIj5EYXNoYm9hcmQ8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgZGF0YS12aWV3PSJtaXNzaW9ucyIgdHlwZT0iYnV0dG9uIj5NaXNzaW9uczwvYnV0dG9uPgogICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBkYXRhLXZpZXc9InJpc2siIHR5cGU9ImJ1dHRvbiI+UmlzayBTdXJmYWNlPC9idXR0b24+CiAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIGRhdGEtdmlldz0ibW9tZW50dW0iIHR5cGU9ImJ1dHRvbiI+TW9tZW50dW08L2J1dHRvbj4KICAgIDwvbmF2PgoKICAgIDxtYWluIGNsYXNzPSJsYXlvdXQiPgogICAgICA8c2VjdGlvbiBpZD0idmlldy1kYXNoYm9hcmQiIGNsYXNzPSJwYW5lbCB2aWV3LXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkIj4KICAgICAgICAgIDxoMj5TdHJhdGVnaWMgRGFzaGJvYXJkPC9oMj4KICAgICAgICAgIDxwPk9wZXJhdGlvbmFsIHNuYXBzaG90IG9mIHlvdXIgbG9uZy1ob3Jpem9uIHBvc2l0aW9uPC9wPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGlkPSJrcGktZ3JpZCIgY2xhc3M9ImtwaS1ncmlkIj4KICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPSJrcGktY2FyZCI+CiAgICAgICAgICAgIDxzbWFsbD5BY3RpdmUgTWlzc2lvbnM8L3NtYWxsPgogICAgICAgICAgICA8c3Ryb25nIGlkPSJrcGktYWN0aXZlLW1pc3Npb25zIj4wPC9zdHJvbmc+CiAgICAgICAgICA8L2FydGljbGU+CiAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz0ia3BpLWNhcmQiPgogICAgICAgICAgICA8c21hbGw+VG90YWwgUGhhc2VzPC9zbWFsbD4KICAgICAgICAgICAgPHN0cm9uZyBpZD0ia3BpLXRvdGFsLXBoYXNlcyI+MDwvc3Ryb25nPgogICAgICAgICAgPC9hcnRpY2xlPgogICAgICAgICAgPGFydGljbGUgY2xhc3M9ImtwaS1jYXJkIj4KICAgICAgICAgICAgPHNtYWxsPlRvdGFsIFN0cmF0ZWdpYyBNb3Zlczwvc21hbGw+CiAgICAgICAgICAgIDxzdHJvbmcgaWQ9ImtwaS10b3RhbC1tb3ZlcyI+MDwvc3Ryb25nPgogICAgICAgICAgPC9hcnRpY2xlPgogICAgICAgICAgPGFydGljbGUgY2xhc3M9ImtwaS1jYXJkIj4KICAgICAgICAgICAgPHNtYWxsPk1vbWVudHVtIEF2ZXJhZ2U8L3NtYWxsPgogICAgICAgICAgICA8c3Ryb25nIGlkPSJrcGktbW9tZW50dW0tYXZnIj4wLjA8L3N0cm9uZz4KICAgICAgICAgIDwvYXJ0aWNsZT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0iZGFzaGJvYXJkLWdyaWQiPgogICAgICAgICAgPGRpdiBjbGFzcz0iZGFzaGJvYXJkLWJsb2NrIj4KICAgICAgICAgICAgPGgzPlJlY2VudCBNaXNzaW9uczwvaDM+CiAgICAgICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZC1yZWNlbnQtbWlzc2lvbnMiIGNsYXNzPSJkYXNoYm9hcmQtbGlzdCI+PC9kaXY+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtYmxvY2siPgogICAgICAgICAgICA8aDM+TGV2ZXJhZ2UgQmFsYW5jZTwvaDM+CiAgICAgICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZC1sZXZlcmFnZS1iYXJzIiBjbGFzcz0ibGV2ZXItYmFycyI+PC9kaXY+CiAgICAgICAgICAgIDxoMyBjbGFzcz0iZGFzaGJvYXJkLXN1YmhlYWQiPlJlY2VudCBNb21lbnR1bTwvaDM+CiAgICAgICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZC1yZWNlbnQtbW9tZW50dW0iIGNsYXNzPSJkYXNoYm9hcmQtbGlzdCI+PC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9zZWN0aW9uPgoKICAgICAgPHNlY3Rpb24gaWQ9InZpZXctbWlzc2lvbnMiIGNsYXNzPSJwYW5lbCB2aWV3LXBhbmVsIGhpZGRlbi12aWV3Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkIj4KICAgICAgICAgIDxoMj5Mb25nIEhvcml6b24gUGxhbm5lcjwvaDI+CiAgICAgICAgICA8cD4xLTUgeWVhciBhcmNzLCBub3Qgc3ByaW50cy48L3A+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxmb3JtIGlkPSJtaXNzaW9uLWZvcm0iIGNsYXNzPSJzdGFjay1mb3JtIj4KICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgTWlzc2lvbgogICAgICAgICAgICA8aW5wdXQgaWQ9Im1pc3Npb24tdGl0bGUiIG5hbWU9Im1pc3Npb24tdGl0bGUiIG1heGxlbmd0aD0iMTAwIiByZXF1aXJlZCBwbGFjZWhvbGRlcj0iQnVpbGQgc3RyYXRlZ2ljIHBvc2l0aW9uIGluLi4uIiAvPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgSG9yaXpvbiAoeWVhcnMpCiAgICAgICAgICAgIDxpbnB1dCBpZD0ibWlzc2lvbi1ob3Jpem9uIiBuYW1lPSJtaXNzaW9uLWhvcml6b24iIHR5cGU9Im51bWJlciIgbWluPSIxIiBtYXg9IjUiIHZhbHVlPSIzIiByZXF1aXJlZCAvPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5DcmVhdGUgTWlzc2lvbjwvYnV0dG9uPgogICAgICAgIDwvZm9ybT4KCiAgICAgICAgPGRpdiBpZD0ibWlzc2lvbnMtbGlzdCIgY2xhc3M9Im1pc3Npb25zLWxpc3QiPjwvZGl2PgogICAgICA8L3NlY3Rpb24+CgogICAgICA8c2VjdGlvbiBpZD0idmlldy1yaXNrIiBjbGFzcz0icGFuZWwgc3BsaXQtcGFuZWwgdmlldy1wYW5lbCBoaWRkZW4tdmlldyI+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InBhbmVsLWhlYWQiPgogICAgICAgICAgICA8aDI+TGV2ZXJhZ2UgTWFwcGluZzwvaDI+CiAgICAgICAgICAgIDxwPlNraWxsLCBOZXR3b3JrLCBDYXBpdGFsLCBEaXN0cmlidXRpb24sIFRlY2hub2xvZ3k8L3A+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxjYW52YXMgaWQ9ImxldmVyYWdlLWNoYXJ0IiB3aWR0aD0iMzYwIiBoZWlnaHQ9IjI0MCIgYXJpYS1sYWJlbD0iTGV2ZXJhZ2UgYmFsYW5jZSBjaGFydCI+PC9jYW52YXM+CiAgICAgICAgICA8ZGl2IGlkPSJsZXZlcmFnZS1nYXAiIGNsYXNzPSJtZXRyaWMtbGluZSI+PC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkIj4KICAgICAgICAgICAgPGgyPlJpc2sgU3VyZmFjZSBBbmFseXplcjwvaDI+CiAgICAgICAgICAgIDxwPjEweDEwIFByb2JhYmlsaXR5IHggSW1wYWN0PC9wPgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGZvcm0gaWQ9InJpc2stZm9ybSIgY2xhc3M9InN0YWNrLWZvcm0gY29tcGFjdCI+CiAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICBSaXNrIFBvaW50CiAgICAgICAgICAgICAgPGlucHV0IGlkPSJyaXNrLXRpdGxlIiBtYXhsZW5ndGg9IjEwMCIgcmVxdWlyZWQgcGxhY2Vob2xkZXI9IlJlZ3VsYXRvcnkgYm90dGxlbmVjayIgLz4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgIFByb2JhYmlsaXR5ICgxLTEwKQogICAgICAgICAgICAgIDxpbnB1dCBpZD0icmlzay1wcm9iIiB0eXBlPSJudW1iZXIiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjUiIHJlcXVpcmVkIC8+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICBJbXBhY3QgKDEtMTApCiAgICAgICAgICAgICAgPGlucHV0IGlkPSJyaXNrLWltcGFjdCIgdHlwZT0ibnVtYmVyIiBtaW49IjEiIG1heD0iMTAiIHZhbHVlPSI1IiByZXF1aXJlZCAvPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+QWRkIFJpc2s8L2J1dHRvbj4KICAgICAgICAgIDwvZm9ybT4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJyaXNrLW1ldHJpY3MiPgogICAgICAgICAgICA8cCBpZD0icmlzay10b3RhbCI+VG90YWwgUmlza3M6IDA8L3A+CiAgICAgICAgICAgIDxwIGlkPSJhdmctZXhwb3N1cmUiPkF2ZXJhZ2UgRXhwb3N1cmU6IDA8L3A+CiAgICAgICAgICAgIDxwIGlkPSJwZWFrLWV4cG9zdXJlIj5QZWFrIEV4cG9zdXJlOiAwPC9wPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGlkPSJyaXNrLWdyaWQiIGNsYXNzPSJyaXNrLWdyaWQiIHJvbGU9ImltZyIgYXJpYS1sYWJlbD0iUmlzayBtYXRyaXgiPjwvZGl2PgogICAgICAgICAgPGRpdiBpZD0icmlzay1saXN0IiBjbGFzcz0icmlzay1saXN0Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9zZWN0aW9uPgoKICAgICAgPHNlY3Rpb24gaWQ9InZpZXctbW9tZW50dW0iIGNsYXNzPSJwYW5lbCB2aWV3LXBhbmVsIGhpZGRlbi12aWV3Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkIj4KICAgICAgICAgIDxoMj5Nb21lbnR1bSBUcmFja2VyPC9oMj4KICAgICAgICAgIDxwPldlZWtseSBzdHJhdGVnaWMgbW92ZW1lbnQgcHVsc2U8L3A+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxmb3JtIGlkPSJtb21lbnR1bS1mb3JtIiBjbGFzcz0ic3RhY2stZm9ybSBjb21wYWN0IHJvdyI+CiAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgIFdlZWsKICAgICAgICAgICAgPGlucHV0IGlkPSJtb21lbnR1bS13ZWVrIiB0eXBlPSJkYXRlIiByZXF1aXJlZCAvPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgU2NvcmUgKDAtMTApCiAgICAgICAgICAgIDxpbnB1dCBpZD0ibW9tZW50dW0tc2NvcmUiIHR5cGU9Im51bWJlciIgbWluPSIwIiBtYXg9IjEwIiB2YWx1ZT0iNSIgcmVxdWlyZWQgLz4KICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+TG9nPC9idXR0b24+CiAgICAgICAgPC9mb3JtPgoKICAgICAgICA8ZGl2IGNsYXNzPSJyaXNrLW1ldHJpY3MiPgogICAgICAgICAgPHAgaWQ9Im1vbWVudHVtLXRyZW5kIj5UcmVuZDogLS08L3A+CiAgICAgICAgICA8cCBpZD0ic3RhZ25hdGlvbi1hbGVydCI+U3RhZ25hdGlvbjogLS08L3A+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0ibW9tZW50dW0tYmFycyIgY2xhc3M9Im1vbWVudHVtLWJhcnMiPjwvZGl2PgogICAgICA8L3NlY3Rpb24+CiAgICA8L21haW4+CgogICAgPGRpdiBpZD0iZHJhd2VyLWJhY2tkcm9wIiBjbGFzcz0iZHJhd2VyLWJhY2tkcm9wIiBoaWRkZW4+PC9kaXY+CiAgICA8YXNpZGUgaWQ9Im1pc3Npb24tZHJhd2VyIiBjbGFzcz0ibWlzc2lvbi1kcmF3ZXIiIGFyaWEtaGlkZGVuPSJ0cnVlIj4KICAgICAgPGRpdiBjbGFzcz0iZHJhd2VyLWhlYWQiPgogICAgICAgIDxkaXY+CiAgICAgICAgICA8aDIgaWQ9ImRyYXdlci10aXRsZSI+TWlzc2lvbiBEZXRhaWw8L2gyPgogICAgICAgICAgPHAgaWQ9ImRyYXdlci1zdWJ0aXRsZSIgY2xhc3M9Im1ldGEiPjwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgIDxidXR0b24gaWQ9ImRyYXdlci1jeWNsZS1taXNzaW9uIiB0eXBlPSJidXR0b24iPkN5Y2xlIE1pc3Npb248L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gaWQ9ImRyYXdlci1jbG9zZSIgdHlwZT0iYnV0dG9uIj5DbG9zZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgY2xhc3M9ImRyYXdlci1ncmlkIj4KICAgICAgICA8ZGl2PgogICAgICAgICAgPGgzPlBoYXNlczwvaDM+CiAgICAgICAgICA8Zm9ybSBpZD0iZHJhd2VyLXBoYXNlLWZvcm0iIGNsYXNzPSJjb21wYWN0LWlubGluZSI+CiAgICAgICAgICAgIDxpbnB1dCBpZD0iZHJhd2VyLXBoYXNlLXRpdGxlIiBtYXhsZW5ndGg9IjgwIiBwbGFjZWhvbGRlcj0iQWRkIHBoYXNlIiByZXF1aXJlZCAvPgogICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+QWRkPC9idXR0b24+CiAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICA8ZGl2IGlkPSJkcmF3ZXItcGhhc2VzIiBjbGFzcz0iZGFzaGJvYXJkLWxpc3QiPjwvZGl2PgoKICAgICAgICAgIDxoMyBjbGFzcz0iZGFzaGJvYXJkLXN1YmhlYWQiPlN0cmF0ZWdpYyBNb3ZlczwvaDM+CiAgICAgICAgICA8Zm9ybSBpZD0iZHJhd2VyLW1vdmUtZm9ybSIgY2xhc3M9Im1vdmUtZm9ybSBjb21wYWN0LWlubGluZSI+CiAgICAgICAgICAgIDxpbnB1dCBpZD0iZHJhd2VyLW1vdmUtdGl0bGUiIG1heGxlbmd0aD0iODAiIHBsYWNlaG9sZGVyPSJTdHJhdGVnaWMgbW92ZSIgcmVxdWlyZWQgLz4KICAgICAgICAgICAgPHNlbGVjdCBpZD0iZHJhd2VyLW1vdmUtbGV2ZXJhZ2UiIHJlcXVpcmVkPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNraWxsIj5Ta2lsbDwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik5ldHdvcmsiPk5ldHdvcms8L29wdGlvbj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDYXBpdGFsIj5DYXBpdGFsPC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRGlzdHJpYnV0aW9uIj5EaXN0cmlidXRpb248L29wdGlvbj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJUZWNobm9sb2d5Ij5UZWNobm9sb2d5PC9vcHRpb24+CiAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8c2VsZWN0IGlkPSJkcmF3ZXItbW92ZS1waGFzZSIgcmVxdWlyZWQ+PC9zZWxlY3Q+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5BZGQ8L2J1dHRvbj4KICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgIDxkaXYgaWQ9ImRyYXdlci1tb3ZlcyIgY2xhc3M9ImRhc2hib2FyZC1saXN0Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdj4KICAgICAgICAgIDxoMz5NaXNzaW9uIExldmVyYWdlIE1peDwvaDM+CiAgICAgICAgICA8ZGl2IGlkPSJkcmF3ZXItbGV2ZXJhZ2UtYmFycyIgY2xhc3M9ImxldmVyLWJhcnMiPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvYXNpZGU+CgogICAgPHRlbXBsYXRlIGlkPSJtaXNzaW9uLXRlbXBsYXRlIj4KICAgICAgPGFydGljbGUgY2xhc3M9Im1pc3Npb24tY2FyZCI+CiAgICAgICAgPGRpdiBjbGFzcz0ibWlzc2lvbi10b3AiPgogICAgICAgICAgPGgzPjwvaDM+CiAgICAgICAgICA8c3BhbiBjbGFzcz0icGlsbCI+PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxwIGNsYXNzPSJtZXRhIj48L3A+CgogICAgICAgIDxmb3JtIGNsYXNzPSJwaGFzZS1mb3JtIGNvbXBhY3QtaW5saW5lIj4KICAgICAgICAgIDxpbnB1dCBjbGFzcz0icGhhc2UtdGl0bGUiIG1heGxlbmd0aD0iODAiIHBsYWNlaG9sZGVyPSJBZGQgcGhhc2UiIHJlcXVpcmVkIC8+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+QWRkIFBoYXNlPC9idXR0b24+CiAgICAgICAgPC9mb3JtPgoKICAgICAgICA8ZGl2IGNsYXNzPSJwaGFzZXMiPjwvZGl2PgoKICAgICAgICA8Zm9ybSBjbGFzcz0ibW92ZS1mb3JtIGNvbXBhY3QtaW5saW5lIj4KICAgICAgICAgIDxpbnB1dCBjbGFzcz0ibW92ZS10aXRsZSIgbWF4bGVuZ3RoPSI4MCIgcGxhY2Vob2xkZXI9IlN0cmF0ZWdpYyBtb3ZlIiByZXF1aXJlZCAvPgogICAgICAgICAgPHNlbGVjdCBjbGFzcz0ibW92ZS1sZXZlcmFnZSIgcmVxdWlyZWQ+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNraWxsIj5Ta2lsbDwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOZXR3b3JrIj5OZXR3b3JrPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNhcGl0YWwiPkNhcGl0YWw8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRGlzdHJpYnV0aW9uIj5EaXN0cmlidXRpb248L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVGVjaG5vbG9neSI+VGVjaG5vbG9neTwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICA8c2VsZWN0IGNsYXNzPSJtb3ZlLXBoYXNlIiByZXF1aXJlZD48L3NlbGVjdD4KICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5BZGQgTW92ZTwvYnV0dG9uPgogICAgICAgIDwvZm9ybT4KCiAgICAgICAgPGRpdiBjbGFzcz0ibW92ZXMiPjwvZGl2PgogICAgICA8L2FydGljbGU+CiAgICA8L3RlbXBsYXRlPgoKICAgIAo8c2NyaXB0PmNvbnN0IExFR0FDWV9TVE9SQUdFX0tFWSA9ICJzaGFkb3dib2FyZC1zdGF0ZS12MSI7CmNvbnN0IEVOQ1JZUFRFRF9TVE9SQUdFX0tFWSA9ICJzaGFkb3dib2FyZC1lbmNyeXB0ZWQtdjEiOwpjb25zdCBLREZfSVRFUkFUSU9OUyA9IDIxMDAwMDsKY29uc3QgQVVUT19MT0NLX01TID0gMTAgKiA2MCAqIDEwMDA7CmNvbnN0IExFVkVSQUdFX1RZUEVTID0gWyJTa2lsbCIsICJOZXR3b3JrIiwgIkNhcGl0YWwiLCAiRGlzdHJpYnV0aW9uIiwgIlRlY2hub2xvZ3kiXTsKY29uc3QgTUlTU0lPTl9TVEFUVVMgPSBbIlBsYW5uaW5nIiwgIkFjdGl2ZSIsICJDb21wbGV0ZWQiLCAiQWJhbmRvbmVkIl07CgpsZXQgc3RhdGUgPSBmcmVzaFN0YXRlKCk7CmxldCBib290U3RhdGUgPSBmcmVzaFN0YXRlKCk7CmxldCBpc1VubG9ja2VkID0gZmFsc2U7CmxldCBzZXNzaW9uUGFzc3BocmFzZSA9ICIiOwpsZXQgYXV0b0xvY2tUaW1lciA9IG51bGw7CmxldCBhY3RpdmVWaWV3ID0gImRhc2hib2FyZCI7CmxldCBzZWxlY3RlZE1pc3Npb25JZCA9IG51bGw7Cgpjb25zdCBtaXNzaW9uRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtaXNzaW9uLWZvcm0iKTsKY29uc3QgbWlzc2lvblRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWlzc2lvbi10aXRsZSIpOwpjb25zdCBtaXNzaW9uSG9yaXpvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1pc3Npb24taG9yaXpvbiIpOwpjb25zdCBtaXNzaW9uc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWlzc2lvbnMtbGlzdCIpOwpjb25zdCBtaXNzaW9uVGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWlzc2lvbi10ZW1wbGF0ZSIpOwoKY29uc3Qgcmlza0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmlzay1mb3JtIik7CmNvbnN0IHJpc2tUaXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJpc2stdGl0bGUiKTsKY29uc3Qgcmlza1Byb2JJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyaXNrLXByb2IiKTsKY29uc3Qgcmlza0ltcGFjdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJpc2staW1wYWN0Iik7CmNvbnN0IGF2Z0V4cG9zdXJlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXZnLWV4cG9zdXJlIik7CmNvbnN0IHBlYWtFeHBvc3VyZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBlYWstZXhwb3N1cmUiKTsKY29uc3Qgcmlza1RvdGFsRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmlzay10b3RhbCIpOwpjb25zdCByaXNrR3JpZEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJpc2stZ3JpZCIpOwpjb25zdCByaXNrTGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJpc2stbGlzdCIpOwoKY29uc3QgbW9tZW50dW1Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vbWVudHVtLWZvcm0iKTsKY29uc3QgbW9tZW50dW1XZWVrSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9tZW50dW0td2VlayIpOwpjb25zdCBtb21lbnR1bVNjb3JlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9tZW50dW0tc2NvcmUiKTsKY29uc3QgbW9tZW50dW1UcmVuZEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vbWVudHVtLXRyZW5kIik7CmNvbnN0IHN0YWduYXRpb25BbGVydEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YWduYXRpb24tYWxlcnQiKTsKY29uc3QgbW9tZW50dW1CYXJzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9tZW50dW0tYmFycyIpOwoKY29uc3QgbGV2ZXJhZ2VDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGV2ZXJhZ2UtY2hhcnQiKTsKY29uc3QgbGV2ZXJhZ2VHYXBFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZXZlcmFnZS1nYXAiKTsKY29uc3QgbmF2QnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLm5hdi1idG4iKSk7Cgpjb25zdCBrcGlBY3RpdmVNaXNzaW9uc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtwaS1hY3RpdmUtbWlzc2lvbnMiKTsKY29uc3Qga3BpVG90YWxQaGFzZXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJrcGktdG90YWwtcGhhc2VzIik7CmNvbnN0IGtwaVRvdGFsTW92ZXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJrcGktdG90YWwtbW92ZXMiKTsKY29uc3Qga3BpTW9tZW50dW1BdmdFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJrcGktbW9tZW50dW0tYXZnIik7CmNvbnN0IGRhc2hib2FyZFJlY2VudE1pc3Npb25zRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGFzaGJvYXJkLXJlY2VudC1taXNzaW9ucyIpOwpjb25zdCBkYXNoYm9hcmRMZXZlcmFnZUJhcnNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYXNoYm9hcmQtbGV2ZXJhZ2UtYmFycyIpOwpjb25zdCBkYXNoYm9hcmRSZWNlbnRNb21lbnR1bUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhc2hib2FyZC1yZWNlbnQtbW9tZW50dW0iKTsKY29uc3QgZHJhd2VyQmFja2Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZHJhd2VyLWJhY2tkcm9wIik7CmNvbnN0IG1pc3Npb25EcmF3ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWlzc2lvbi1kcmF3ZXIiKTsKY29uc3QgZHJhd2VyVGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcmF3ZXItdGl0bGUiKTsKY29uc3QgZHJhd2VyU3VidGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcmF3ZXItc3VidGl0bGUiKTsKY29uc3QgZHJhd2VyQ3ljbGVNaXNzaW9uQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdlci1jeWNsZS1taXNzaW9uIik7CmNvbnN0IGRyYXdlckNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdlci1jbG9zZSIpOwpjb25zdCBkcmF3ZXJQaGFzZUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZHJhd2VyLXBoYXNlLWZvcm0iKTsKY29uc3QgZHJhd2VyUGhhc2VUaXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdlci1waGFzZS10aXRsZSIpOwpjb25zdCBkcmF3ZXJQaGFzZXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcmF3ZXItcGhhc2VzIik7CmNvbnN0IGRyYXdlck1vdmVGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdlci1tb3ZlLWZvcm0iKTsKY29uc3QgZHJhd2VyTW92ZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZHJhd2VyLW1vdmUtdGl0bGUiKTsKY29uc3QgZHJhd2VyTW92ZUxldmVyYWdlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdlci1tb3ZlLWxldmVyYWdlIik7CmNvbnN0IGRyYXdlck1vdmVQaGFzZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcmF3ZXItbW92ZS1waGFzZSIpOwpjb25zdCBkcmF3ZXJNb3Zlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdlci1tb3ZlcyIpOwpjb25zdCBkcmF3ZXJMZXZlcmFnZUJhcnNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcmF3ZXItbGV2ZXJhZ2UtYmFycyIpOwoKY29uc3QgY29uY2VhbFRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlc2NhcGUtdG9nZ2xlIik7CmNvbnN0IHZhdWx0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2YXVsdC1mb3JtIik7CmNvbnN0IHZhdWx0UGFzc3BocmFzZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZhdWx0LXBhc3NwaHJhc2UiKTsKY29uc3QgdmF1bHRQcmltYXJ5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZhdWx0LXByaW1hcnkiKTsKY29uc3QgdmF1bHRMb2NrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZhdWx0LWxvY2siKTsKY29uc3QgdmF1bHRSb3RhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmF1bHQtcm90YXRlIik7CmNvbnN0IHZhdWx0U3RhdHVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmF1bHQtc3RhdHVzIik7Cgppbml0KCkuY2F0Y2goKCkgPT4gewogIHNldFZhdWx0U3RhdHVzKCJWYXVsdCBpbml0aWFsaXphdGlvbiBmYWlsZWQuIiwgdHJ1ZSk7Cn0pOwoKYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHsKICBiaW5kRXZlbnRzKCk7CiAgZHJhd1Jpc2tHcmlkQmFzZSgpOwogIHNldFZpZXcoYWN0aXZlVmlldyk7CiAgcmVnaXN0ZXJTVygpOwoKICBjb25zdCBlbmNyeXB0ZWRQYXlsb2FkID0gcmVhZEVuY3J5cHRlZFBheWxvYWQoKTsKICBpZiAoZW5jcnlwdGVkUGF5bG9hZCkgewogICAgbG9ja1ZhdWx0VUkoIlZhdWx0IGZvdW5kLiBFbnRlciBwYXNzcGhyYXNlIHRvIHVubG9jay4iKTsKICAgIHJldHVybjsKICB9CgogIGJvb3RTdGF0ZSA9IGxvYWRMZWdhY3lTdGF0ZSgpOwogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExFR0FDWV9TVE9SQUdFX0tFWSk7CiAgbG9ja1ZhdWx0VUkoIlNldCBhIG5ldyBwYXNzcGhyYXNlIHRvIGluaXRpYWxpemUgZW5jcnlwdGVkIHZhdWx0IHN0b3JhZ2UuIik7Cn0KCmZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7CiAgZm9yIChjb25zdCBidG4gb2YgbmF2QnV0dG9ucykgewogICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICBzZXRWaWV3KGJ0bi5kYXRhc2V0LnZpZXcpOwogICAgfSk7CiAgfQoKICBkcmF3ZXJDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGNsb3NlTWlzc2lvbkRyYXdlcik7CiAgZHJhd2VyQmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBjbG9zZU1pc3Npb25EcmF3ZXIpOwoKICBkcmF3ZXJDeWNsZU1pc3Npb25CdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCBtaXNzaW9uID0gZ2V0U2VsZWN0ZWRNaXNzaW9uKCk7CiAgICBpZiAoIW1pc3Npb24pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgbWlzc2lvbi5zdGF0dXMgPSBuZXh0U3RhdHVzKG1pc3Npb24uc3RhdHVzKTsKICAgIGF3YWl0IHNhdmVBbmRSZW5kZXIoKTsKICB9KTsKCiAgZHJhd2VyUGhhc2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsIGFzeW5jIChldmVudCkgPT4gewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGNvbnN0IG1pc3Npb24gPSBnZXRTZWxlY3RlZE1pc3Npb24oKTsKICAgIGlmICghbWlzc2lvbikgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCB0aXRsZSA9IGRyYXdlclBoYXNlVGl0bGVJbnB1dC52YWx1ZS50cmltKCk7CiAgICBpZiAoIXRpdGxlKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG1pc3Npb24ucGhhc2VzLnB1c2goeyBpZDogdWlkKCksIHRpdGxlIH0pOwogICAgZHJhd2VyUGhhc2VUaXRsZUlucHV0LnZhbHVlID0gIiI7CiAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgfSk7CgogIGRyYXdlck1vdmVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsIGFzeW5jIChldmVudCkgPT4gewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGNvbnN0IG1pc3Npb24gPSBnZXRTZWxlY3RlZE1pc3Npb24oKTsKICAgIGlmICghbWlzc2lvbikgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCB0aXRsZSA9IGRyYXdlck1vdmVUaXRsZUlucHV0LnZhbHVlLnRyaW0oKTsKICAgIGNvbnN0IGxldmVyYWdlVHlwZSA9IGRyYXdlck1vdmVMZXZlcmFnZVNlbGVjdC52YWx1ZTsKICAgIGNvbnN0IHBoYXNlSWQgPSBkcmF3ZXJNb3ZlUGhhc2VTZWxlY3QudmFsdWU7CiAgICBpZiAoIXRpdGxlIHx8ICFwaGFzZUlkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG1pc3Npb24uc3RyYXRlZ2ljTW92ZXMucHVzaCh7CiAgICAgIGlkOiB1aWQoKSwKICAgICAgdGl0bGUsCiAgICAgIGxldmVyYWdlVHlwZSwKICAgICAgcGhhc2VJZCwKICAgICAgc3RhdHVzOiAiUGxhbm5pbmciCiAgICB9KTsKICAgIGRyYXdlck1vdmVUaXRsZUlucHV0LnZhbHVlID0gIiI7CiAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgfSk7CgogIG1pc3Npb25Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsIGFzeW5jIChldmVudCkgPT4gewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGlmICghcmVxdWlyZVVubG9ja2VkKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IHRpdGxlID0gbWlzc2lvblRpdGxlSW5wdXQudmFsdWUudHJpbSgpOwogICAgY29uc3QgaG9yaXpvblllYXJzID0gTnVtYmVyKG1pc3Npb25Ib3Jpem9uSW5wdXQudmFsdWUpOwoKICAgIGlmICghdGl0bGUgfHwgIWluUmFuZ2UoaG9yaXpvblllYXJzLCAxLCA1KSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgbWlzc2lvbiA9IHsKICAgICAgaWQ6IHVpZCgpLAogICAgICB0aXRsZSwKICAgICAgaG9yaXpvblllYXJzLAogICAgICBzdGF0dXM6ICJQbGFubmluZyIsCiAgICAgIHBoYXNlczogW10sCiAgICAgIHN0cmF0ZWdpY01vdmVzOiBbXSwKICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpCiAgICB9OwoKICAgIHN0YXRlLm1pc3Npb25zLnVuc2hpZnQobWlzc2lvbik7CiAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgICBtaXNzaW9uRm9ybS5yZXNldCgpOwogICAgbWlzc2lvbkhvcml6b25JbnB1dC52YWx1ZSA9ICIzIjsKICB9KTsKCiAgcmlza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcigic3VibWl0IiwgYXN5bmMgKGV2ZW50KSA9PiB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgaWYgKCFyZXF1aXJlVW5sb2NrZWQoKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgdGl0bGUgPSByaXNrVGl0bGVJbnB1dC52YWx1ZS50cmltKCk7CiAgICBjb25zdCBwcm9iYWJpbGl0eSA9IE51bWJlcihyaXNrUHJvYklucHV0LnZhbHVlKTsKICAgIGNvbnN0IGltcGFjdCA9IE51bWJlcihyaXNrSW1wYWN0SW5wdXQudmFsdWUpOwoKICAgIGlmICghdGl0bGUgfHwgIWluUmFuZ2UocHJvYmFiaWxpdHksIDEsIDEwKSB8fCAhaW5SYW5nZShpbXBhY3QsIDEsIDEwKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgc3RhdGUucmlza1BvaW50cy51bnNoaWZ0KHsKICAgICAgaWQ6IHVpZCgpLAogICAgICB0aXRsZSwKICAgICAgcHJvYmFiaWxpdHksCiAgICAgIGltcGFjdCwKICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpCiAgICB9KTsKCiAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgICByaXNrRm9ybS5yZXNldCgpOwogICAgcmlza1Byb2JJbnB1dC52YWx1ZSA9ICI1IjsKICAgIHJpc2tJbXBhY3RJbnB1dC52YWx1ZSA9ICI1IjsKICB9KTsKCiAgbW9tZW50dW1Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsIGFzeW5jIChldmVudCkgPT4gewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGlmICghcmVxdWlyZVVubG9ja2VkKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IHdlZWsgPSBtb21lbnR1bVdlZWtJbnB1dC52YWx1ZTsKICAgIGNvbnN0IHNjb3JlID0gTnVtYmVyKG1vbWVudHVtU2NvcmVJbnB1dC52YWx1ZSk7CgogICAgaWYgKCF3ZWVrIHx8ICFpblJhbmdlKHNjb3JlLCAwLCAxMCkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGV4aXN0aW5nID0gc3RhdGUubW9tZW50dW1Mb2dzLmZpbmQoKGl0ZW0pID0+IGl0ZW0ud2VlayA9PT0gd2Vlayk7CiAgICBpZiAoZXhpc3RpbmcpIHsKICAgICAgZXhpc3Rpbmcuc2NvcmUgPSBzY29yZTsKICAgICAgZXhpc3RpbmcudXBkYXRlZEF0ID0gRGF0ZS5ub3coKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLm1vbWVudHVtTG9ncy5wdXNoKHsKICAgICAgICBpZDogdWlkKCksCiAgICAgICAgd2VlaywKICAgICAgICBzY29yZSwKICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCkKICAgICAgfSk7CiAgICB9CgogICAgc3RhdGUubW9tZW50dW1Mb2dzLnNvcnQoKGEsIGIpID0+IGEud2Vlay5sb2NhbGVDb21wYXJlKGIud2VlaykpOwogICAgYXdhaXQgc2F2ZUFuZFJlbmRlcigpOwogICAgbW9tZW50dW1Gb3JtLnJlc2V0KCk7CiAgICBtb21lbnR1bVdlZWtJbnB1dC52YWx1ZSA9IHRvZGF5SVNPKCk7CiAgICBtb21lbnR1bVNjb3JlSW5wdXQudmFsdWUgPSAiNSI7CiAgfSk7CgogIHZhdWx0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBhc3luYyAoZXZlbnQpID0+IHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBjb25zdCBwYXNzcGhyYXNlID0gdmF1bHRQYXNzcGhyYXNlSW5wdXQudmFsdWU7CiAgICBpZiAocGFzc3BocmFzZS5sZW5ndGggPCA4KSB7CiAgICAgIHNldFZhdWx0U3RhdHVzKCJQYXNzcGhyYXNlIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzLiIsIHRydWUpOwogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgZW5jcnlwdGVkUGF5bG9hZCA9IHJlYWRFbmNyeXB0ZWRQYXlsb2FkKCk7CiAgICBpZiAoZW5jcnlwdGVkUGF5bG9hZCkgewogICAgICBhd2FpdCB1bmxvY2tWYXVsdChwYXNzcGhyYXNlLCBlbmNyeXB0ZWRQYXlsb2FkKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGF3YWl0IHNldHVwTmV3VmF1bHQocGFzc3BocmFzZSk7CiAgfSk7CgogIHZhdWx0TG9ja0J0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKICAgIGxvY2tWYXVsdFVJKCJWYXVsdCBsb2NrZWQuIik7CiAgfSk7CgogIHZhdWx0Um90YXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYXN5bmMgKCkgPT4gewogICAgaWYgKCFyZXF1aXJlVW5sb2NrZWQoKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgbmV4dFBhc3NwaHJhc2UgPSB2YXVsdFBhc3NwaHJhc2VJbnB1dC52YWx1ZTsKICAgIGlmIChuZXh0UGFzc3BocmFzZS5sZW5ndGggPCA4KSB7CiAgICAgIHNldFZhdWx0U3RhdHVzKCJFbnRlciBhIG5ldyBwYXNzcGhyYXNlIChtaW4gOCBjaGFycykgdG8gcm90YXRlIGtleS4iLCB0cnVlKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGF3YWl0IHBlcnNpc3RFbmNyeXB0ZWRTdGF0ZShuZXh0UGFzc3BocmFzZSk7CiAgICBzZXNzaW9uUGFzc3BocmFzZSA9IG5leHRQYXNzcGhyYXNlOwogICAgdmF1bHRQYXNzcGhyYXNlSW5wdXQudmFsdWUgPSAiIjsKICAgIHNldFZhdWx0U3RhdHVzKCJWYXVsdCBrZXkgcm90YXRlZC4iKTsKICB9KTsKCiAgY29uY2VhbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHRvZ2dsZUNvbmNlYWxtZW50KTsKCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCAoZXZlbnQpID0+IHsKICAgIGlmIChpc1VubG9ja2VkKSB7CiAgICAgIGJ1bXBBdXRvTG9ja1RpbWVyKCk7CiAgICB9CiAgICBpZiAoZXZlbnQua2V5ID09PSAiRXNjYXBlIikgewogICAgICB0b2dnbGVDb25jZWFsbWVudCgpOwogICAgfQogIH0pOwoKICBjb25zdCBhY3Rpdml0eUV2ZW50cyA9IFsicG9pbnRlcmRvd24iLCAibW91c2Vtb3ZlIiwgInRvdWNoc3RhcnQiLCAic2Nyb2xsIl07CiAgZm9yIChjb25zdCBldmVudE5hbWUgb2YgYWN0aXZpdHlFdmVudHMpIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKAogICAgICBldmVudE5hbWUsCiAgICAgICgpID0+IHsKICAgICAgICBpZiAoaXNVbmxvY2tlZCkgewogICAgICAgICAgYnVtcEF1dG9Mb2NrVGltZXIoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9CiAgICApOwogIH0KfQoKYXN5bmMgZnVuY3Rpb24gc2V0dXBOZXdWYXVsdChwYXNzcGhyYXNlKSB7CiAgc3RhdGUgPSBzdHJ1Y3R1cmVkQ2xvbmVTYWZlKGJvb3RTdGF0ZSk7CiAgYXdhaXQgcGVyc2lzdEVuY3J5cHRlZFN0YXRlKHBhc3NwaHJhc2UpOwogIHNlc3Npb25QYXNzcGhyYXNlID0gcGFzc3BocmFzZTsKICBpc1VubG9ja2VkID0gdHJ1ZTsKICBidW1wQXV0b0xvY2tUaW1lcigpOwogIHN5bmNWYXVsdFVJKCk7CiAgcmVuZGVyQWxsKCk7CiAgdmF1bHRQYXNzcGhyYXNlSW5wdXQudmFsdWUgPSAiIjsKICBzZXRWYXVsdFN0YXR1cygiRW5jcnlwdGVkIHZhdWx0IGluaXRpYWxpemVkIGFuZCB1bmxvY2tlZC4iKTsKfQoKYXN5bmMgZnVuY3Rpb24gdW5sb2NrVmF1bHQocGFzc3BocmFzZSwgcGF5bG9hZCkgewogIHRyeSB7CiAgICBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCBkZWNyeXB0U3RhdGUocGFzc3BocmFzZSwgcGF5bG9hZCk7CiAgICBzdGF0ZSA9IG5vcm1hbGl6ZVN0YXRlKGRlY3J5cHRlZCk7CiAgICBzZXNzaW9uUGFzc3BocmFzZSA9IHBhc3NwaHJhc2U7CiAgICBpc1VubG9ja2VkID0gdHJ1ZTsKICAgIGJ1bXBBdXRvTG9ja1RpbWVyKCk7CiAgICBzeW5jVmF1bHRVSSgpOwogICAgcmVuZGVyQWxsKCk7CiAgICB2YXVsdFBhc3NwaHJhc2VJbnB1dC52YWx1ZSA9ICIiOwogICAgc2V0VmF1bHRTdGF0dXMoIlZhdWx0IHVubG9ja2VkLiIpOwogIH0gY2F0Y2ggewogICAgc2V0VmF1bHRTdGF0dXMoIlVubG9jayBmYWlsZWQuIEluY29ycmVjdCBwYXNzcGhyYXNlIG9yIGNvcnJ1cHRlZCBkYXRhLiIsIHRydWUpOwogIH0KfQoKZnVuY3Rpb24gbG9ja1ZhdWx0VUkobWVzc2FnZSkgewogIGlzVW5sb2NrZWQgPSBmYWxzZTsKICBzZXNzaW9uUGFzc3BocmFzZSA9ICIiOwogIGNsZWFyQXV0b0xvY2tUaW1lcigpOwogIGNsb3NlTWlzc2lvbkRyYXdlcigpOwogIHN0YXRlID0gZnJlc2hTdGF0ZSgpOwogIHJlbmRlckFsbCgpOwogIHN5bmNWYXVsdFVJKCk7CiAgc2V0VmF1bHRTdGF0dXMobWVzc2FnZSB8fCAiVmF1bHQgbG9ja2VkLiIpOwp9CgpmdW5jdGlvbiBzeW5jVmF1bHRVSSgpIHsKICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoInZhdWx0LWxvY2tlZCIsICFpc1VubG9ja2VkKTsKCiAgaWYgKGlzVW5sb2NrZWQpIHsKICAgIHZhdWx0UHJpbWFyeUJ0bi50ZXh0Q29udGVudCA9ICJVbmxvY2siOwogICAgdmF1bHRQcmltYXJ5QnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgIHZhdWx0TG9ja0J0bi5oaWRkZW4gPSBmYWxzZTsKICAgIHZhdWx0Um90YXRlQnRuLmhpZGRlbiA9IGZhbHNlOwogICAgbWlzc2lvblRpdGxlSW5wdXQuZm9jdXMoKTsKICAgIGlmICghc3RhdGUubW9tZW50dW1Mb2dzLmxlbmd0aCkgewogICAgICBtb21lbnR1bVdlZWtJbnB1dC52YWx1ZSA9IHRvZGF5SVNPKCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHZhdWx0UHJpbWFyeUJ0bi5kaXNhYmxlZCA9IGZhbHNlOwogICAgdmF1bHRQcmltYXJ5QnRuLnRleHRDb250ZW50ID0gcmVhZEVuY3J5cHRlZFBheWxvYWQoKSA/ICJVbmxvY2siIDogIlNldCBQYXNzcGhyYXNlIjsKICAgIHZhdWx0TG9ja0J0bi5oaWRkZW4gPSB0cnVlOwogICAgdmF1bHRSb3RhdGVCdG4uaGlkZGVuID0gdHJ1ZTsKICAgIHZhdWx0UGFzc3BocmFzZUlucHV0LmZvY3VzKCk7CiAgfQp9CgpmdW5jdGlvbiByZXF1aXJlVW5sb2NrZWQoKSB7CiAgaWYgKGlzVW5sb2NrZWQpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgc2V0VmF1bHRTdGF0dXMoIlZhdWx0IGlzIGxvY2tlZC4gVW5sb2NrIHRvIGNvbnRpbnVlLiIsIHRydWUpOwogIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gcmVuZGVyQWxsKCkgewogIHJlbmRlckRhc2hib2FyZCgpOwogIHJlbmRlck1pc3Npb25zKCk7CiAgcmVuZGVyTGV2ZXJhZ2UoKTsKICByZW5kZXJSaXNrcygpOwogIHJlbmRlck1vbWVudHVtKCk7CiAgcmVuZGVyTWlzc2lvbkRyYXdlcigpOwp9CgpmdW5jdGlvbiByZW5kZXJEYXNoYm9hcmQoKSB7CiAgY29uc3QgbWlzc2lvbnMgPSBzdGF0ZS5taXNzaW9uczsKICBjb25zdCBhbGxNb3ZlcyA9IG1pc3Npb25zLmZsYXRNYXAoKG1pc3Npb24pID0+IG1pc3Npb24uc3RyYXRlZ2ljTW92ZXMgfHwgW10pOwogIGNvbnN0IGFjdGl2ZU1pc3Npb25zID0gbWlzc2lvbnMuZmlsdGVyKChtaXNzaW9uKSA9PiBtaXNzaW9uLnN0YXR1cyA9PT0gIkFjdGl2ZSIpLmxlbmd0aDsKICBjb25zdCB0b3RhbFBoYXNlcyA9IG1pc3Npb25zLnJlZHVjZSgoc3VtLCBtaXNzaW9uKSA9PiBzdW0gKyBtaXNzaW9uLnBoYXNlcy5sZW5ndGgsIDApOwogIGNvbnN0IG1vbWVudHVtQXZnID0gc3RhdGUubW9tZW50dW1Mb2dzLmxlbmd0aAogICAgPyAoc3RhdGUubW9tZW50dW1Mb2dzLnJlZHVjZSgoc3VtLCBsb2cpID0+IHN1bSArIGxvZy5zY29yZSwgMCkgLyBzdGF0ZS5tb21lbnR1bUxvZ3MubGVuZ3RoKS50b0ZpeGVkKDEpCiAgICA6ICIwLjAiOwoKICBrcGlBY3RpdmVNaXNzaW9uc0VsLnRleHRDb250ZW50ID0gYCR7YWN0aXZlTWlzc2lvbnN9YDsKICBrcGlUb3RhbFBoYXNlc0VsLnRleHRDb250ZW50ID0gYCR7dG90YWxQaGFzZXN9YDsKICBrcGlUb3RhbE1vdmVzRWwudGV4dENvbnRlbnQgPSBgJHthbGxNb3Zlcy5sZW5ndGh9YDsKICBrcGlNb21lbnR1bUF2Z0VsLnRleHRDb250ZW50ID0gYCR7bW9tZW50dW1Bdmd9YDsKCiAgZGFzaGJvYXJkUmVjZW50TWlzc2lvbnNFbC5pbm5lckhUTUwgPSAiIjsKICBjb25zdCByZWNlbnRNaXNzaW9ucyA9IFsuLi5taXNzaW9uc10KICAgIC5zb3J0KChhLCBiKSA9PiAoYi5jcmVhdGVkQXQgfHwgMCkgLSAoYS5jcmVhdGVkQXQgfHwgMCkpCiAgICAuc2xpY2UoMCwgNCk7CiAgaWYgKCFyZWNlbnRNaXNzaW9ucy5sZW5ndGgpIHsKICAgIGRhc2hib2FyZFJlY2VudE1pc3Npb25zRWwuYXBwZW5kKG1ha2VNZXRhKCJObyBtaXNzaW9ucyByZWNvcmRlZC4iKSk7CiAgfSBlbHNlIHsKICAgIGZvciAoY29uc3QgbWlzc2lvbiBvZiByZWNlbnRNaXNzaW9ucykgewogICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgcm93LmNsYXNzTmFtZSA9ICJkYXNoYm9hcmQtcm93IGNsaWNrYWJsZSI7CiAgICAgIHJvdy5pbm5lckhUTUwgPSBgPGRpdj48ZGl2PiR7ZXNjYXBlSFRNTChtaXNzaW9uLnRpdGxlKX08L2Rpdj48c21hbGw+JHttaXNzaW9uLmhvcml6b25ZZWFyc30teWVhciBhcmM8L3NtYWxsPjwvZGl2PjxzbWFsbD4ke21pc3Npb24uc3RhdHVzfTwvc21hbGw+YDsKICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gb3Blbk1pc3Npb25EcmF3ZXIobWlzc2lvbi5pZCkpOwogICAgICBkYXNoYm9hcmRSZWNlbnRNaXNzaW9uc0VsLmFwcGVuZChyb3cpOwogICAgfQogIH0KCiAgZGFzaGJvYXJkTGV2ZXJhZ2VCYXJzRWwuaW5uZXJIVE1MID0gIiI7CiAgY29uc3QgY291bnRzID0gbGV2ZXJhZ2VDb3VudHMoKTsKICBjb25zdCBtYXhDb3VudCA9IE1hdGgubWF4KDEsIC4uLk9iamVjdC52YWx1ZXMoY291bnRzKSk7CiAgZm9yIChjb25zdCB0eXBlIG9mIExFVkVSQUdFX1RZUEVTKSB7CiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHJvdy5jbGFzc05hbWUgPSAibGV2ZXItcm93IjsKICAgIGNvbnN0IHdpZHRoID0gKGNvdW50c1t0eXBlXSAvIG1heENvdW50KSAqIDEwMDsKICAgIHJvdy5pbm5lckhUTUwgPSBgPHNwYW4+JHt0eXBlfTwvc3Bhbj48ZGl2IGNsYXNzPSJsZXZlci10cmFjayI+PGRpdiBjbGFzcz0ibGV2ZXItZmlsbCIgc3R5bGU9IndpZHRoOiR7d2lkdGh9JSI+PC9kaXY+PC9kaXY+PHN0cm9uZz4ke2NvdW50c1t0eXBlXX08L3N0cm9uZz5gOwogICAgZGFzaGJvYXJkTGV2ZXJhZ2VCYXJzRWwuYXBwZW5kKHJvdyk7CiAgfQoKICBkYXNoYm9hcmRSZWNlbnRNb21lbnR1bUVsLmlubmVySFRNTCA9ICIiOwogIGNvbnN0IHJlY2VudE1vbWVudHVtID0gWy4uLnN0YXRlLm1vbWVudHVtTG9nc10uc29ydCgoYSwgYikgPT4gYi53ZWVrLmxvY2FsZUNvbXBhcmUoYS53ZWVrKSkuc2xpY2UoMCwgNSk7CiAgaWYgKCFyZWNlbnRNb21lbnR1bS5sZW5ndGgpIHsKICAgIGRhc2hib2FyZFJlY2VudE1vbWVudHVtRWwuYXBwZW5kKG1ha2VNZXRhKCJObyBtb21lbnR1bSBsb2dzIHJlY29yZGVkLiIpKTsKICB9IGVsc2UgewogICAgZm9yIChjb25zdCBsb2cgb2YgcmVjZW50TW9tZW50dW0pIHsKICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHJvdy5jbGFzc05hbWUgPSAiZGFzaGJvYXJkLXJvdyI7CiAgICAgIHJvdy5pbm5lckhUTUwgPSBgPGRpdj48ZGl2PiR7c2hvcnREYXRlKGxvZy53ZWVrKX08L2Rpdj48c21hbGw+V2Vla2x5IHNpZ25hbDwvc21hbGw+PC9kaXY+PHN0cm9uZz4ke2xvZy5zY29yZX08L3N0cm9uZz5gOwogICAgICBkYXNoYm9hcmRSZWNlbnRNb21lbnR1bUVsLmFwcGVuZChyb3cpOwogICAgfQogIH0KfQoKZnVuY3Rpb24gcmVuZGVyTWlzc2lvbnMoKSB7CiAgbWlzc2lvbnNMaXN0LmlubmVySFRNTCA9ICIiOwoKICBpZiAoIXN0YXRlLm1pc3Npb25zLmxlbmd0aCkgewogICAgY29uc3QgZW1wdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIik7CiAgICBlbXB0eS5jbGFzc05hbWUgPSAibWV0YSI7CiAgICBlbXB0eS50ZXh0Q29udGVudCA9IGlzVW5sb2NrZWQKICAgICAgPyAiTm8gbWlzc2lvbnMgeWV0LiBEZWZpbmUgeW91ciBmaXJzdCBsb25nLWhvcml6b24gb2JqZWN0aXZlLiIKICAgICAgOiAiVmF1bHQgbG9ja2VkLiI7CiAgICBtaXNzaW9uc0xpc3QuYXBwZW5kKGVtcHR5KTsKICAgIHJldHVybjsKICB9CgogIGZvciAoY29uc3QgbWlzc2lvbiBvZiBzdGF0ZS5taXNzaW9ucykgewogICAgY29uc3Qgbm9kZSA9IG1pc3Npb25UZW1wbGF0ZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTsKICAgIG5vZGUuZGF0YXNldC5taXNzaW9uSWQgPSBtaXNzaW9uLmlkOwogICAgbm9kZS5xdWVyeVNlbGVjdG9yKCJoMyIpLnRleHRDb250ZW50ID0gbWlzc2lvbi50aXRsZTsKICAgIG5vZGUucXVlcnlTZWxlY3RvcigiLnBpbGwiKS50ZXh0Q29udGVudCA9IG1pc3Npb24uc3RhdHVzOwogICAgbm9kZS5xdWVyeVNlbGVjdG9yKCIubWV0YSIpLnRleHRDb250ZW50ID0gYCR7bWlzc2lvbi5ob3Jpem9uWWVhcnN9LXllYXIgYXJjIOKAoiAke21pc3Npb24ucGhhc2VzLmxlbmd0aH0gcGhhc2VzIOKAoiAke21pc3Npb24uc3RyYXRlZ2ljTW92ZXMubGVuZ3RofSBtb3Zlc2A7CgogICAgY29uc3QgcGhhc2VGb3JtID0gbm9kZS5xdWVyeVNlbGVjdG9yKCIucGhhc2UtZm9ybSIpOwogICAgcGhhc2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsIGFzeW5jIChldmVudCkgPT4gewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCBpbnB1dCA9IHBoYXNlRm9ybS5xdWVyeVNlbGVjdG9yKCIucGhhc2UtdGl0bGUiKTsKICAgICAgY29uc3QgdGl0bGUgPSBpbnB1dC52YWx1ZS50cmltKCk7CiAgICAgIGlmICghdGl0bGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbWlzc2lvbi5waGFzZXMucHVzaCh7IGlkOiB1aWQoKSwgdGl0bGUgfSk7CiAgICAgIGF3YWl0IHNhdmVBbmRSZW5kZXIoKTsKICAgIH0pOwoKICAgIGNvbnN0IG1vdmVGb3JtID0gbm9kZS5xdWVyeVNlbGVjdG9yKCIubW92ZS1mb3JtIik7CiAgICBjb25zdCBtb3ZlUGhhc2VTZWxlY3QgPSBtb3ZlRm9ybS5xdWVyeVNlbGVjdG9yKCIubW92ZS1waGFzZSIpOwogICAgaHlkcmF0ZU1vdmVQaGFzZVNlbGVjdChtb3ZlUGhhc2VTZWxlY3QsIG1pc3Npb24ucGhhc2VzKTsKCiAgICBtb3ZlRm9ybS5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBhc3luYyAoZXZlbnQpID0+IHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3QgdGl0bGUgPSBtb3ZlRm9ybS5xdWVyeVNlbGVjdG9yKCIubW92ZS10aXRsZSIpLnZhbHVlLnRyaW0oKTsKICAgICAgY29uc3QgbGV2ZXJhZ2VUeXBlID0gbW92ZUZvcm0ucXVlcnlTZWxlY3RvcigiLm1vdmUtbGV2ZXJhZ2UiKS52YWx1ZTsKICAgICAgY29uc3QgcGhhc2VJZCA9IG1vdmVGb3JtLnF1ZXJ5U2VsZWN0b3IoIi5tb3ZlLXBoYXNlIikudmFsdWU7CgogICAgICBpZiAoIXRpdGxlIHx8ICFwaGFzZUlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBtaXNzaW9uLnN0cmF0ZWdpY01vdmVzLnB1c2goewogICAgICAgIGlkOiB1aWQoKSwKICAgICAgICB0aXRsZSwKICAgICAgICBsZXZlcmFnZVR5cGUsCiAgICAgICAgcGhhc2VJZCwKICAgICAgICBzdGF0dXM6ICJQbGFubmluZyIKICAgICAgfSk7CgogICAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgICB9KTsKCiAgICBjb25zdCBwaGFzZVdyYXAgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoIi5waGFzZXMiKTsKICAgIGlmICghbWlzc2lvbi5waGFzZXMubGVuZ3RoKSB7CiAgICAgIHBoYXNlV3JhcC5hcHBlbmQobWFrZU1ldGEoIk5vIHBoYXNlcyB5ZXQuIikpOwogICAgfSBlbHNlIHsKICAgICAgZm9yIChjb25zdCBwaGFzZSBvZiBtaXNzaW9uLnBoYXNlcykgewogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHJvdy5jbGFzc05hbWUgPSAicGhhc2Utcm93IjsKICAgICAgICByb3cuaW5uZXJIVE1MID0gYDxzcGFuPiR7ZXNjYXBlSFRNTChwaGFzZS50aXRsZSl9PC9zcGFuPjxzbWFsbD5QaGFzZTwvc21hbGw+YDsKICAgICAgICBwaGFzZVdyYXAuYXBwZW5kKHJvdyk7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBtb3ZlV3JhcCA9IG5vZGUucXVlcnlTZWxlY3RvcigiLm1vdmVzIik7CiAgICBpZiAoIW1pc3Npb24uc3RyYXRlZ2ljTW92ZXMubGVuZ3RoKSB7CiAgICAgIG1vdmVXcmFwLmFwcGVuZChtYWtlTWV0YSgiTm8gc3RyYXRlZ2ljIG1vdmVzIHlldC4iKSk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKGNvbnN0IG1vdmUgb2YgbWlzc2lvbi5zdHJhdGVnaWNNb3ZlcykgewogICAgICAgIGNvbnN0IHBoYXNlID0gbWlzc2lvbi5waGFzZXMuZmluZCgocCkgPT4gcC5pZCA9PT0gbW92ZS5waGFzZUlkKTsKICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICByb3cuY2xhc3NOYW1lID0gIm1vdmUtcm93IjsKCiAgICAgICAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGxlZnQuaW5uZXJIVE1MID0gYDxkaXY+JHtlc2NhcGVIVE1MKG1vdmUudGl0bGUpfTwvZGl2PjxzbWFsbD4ke21vdmUubGV2ZXJhZ2VUeXBlfSR7cGhhc2UgPyBgIOKAoiAke2VzY2FwZUhUTUwocGhhc2UudGl0bGUpfWAgOiAiIn08L3NtYWxsPmA7CgogICAgICAgIGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBhY3Rpb25zLmNsYXNzTmFtZSA9ICJhY3Rpb24tcm93IjsKICAgICAgICBjb25zdCBzdGF0dXNCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICBzdGF0dXNCdG4udHlwZSA9ICJidXR0b24iOwogICAgICAgIHN0YXR1c0J0bi50ZXh0Q29udGVudCA9IG1vdmUuc3RhdHVzOwogICAgICAgIHN0YXR1c0J0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKICAgICAgICAgIG1vdmUuc3RhdHVzID0gbmV4dFN0YXR1cyhtb3ZlLnN0YXR1cyk7CiAgICAgICAgICBtaXNzaW9uLnN0YXR1cyA9IG1pc3Npb25EZXJpdmVkU3RhdHVzKG1pc3Npb24pOwogICAgICAgICAgYXdhaXQgc2F2ZUFuZFJlbmRlcigpOwogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICBkZWxldGVCdG4udHlwZSA9ICJidXR0b24iOwogICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICJSZW1vdmUiOwogICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKICAgICAgICAgIG1pc3Npb24uc3RyYXRlZ2ljTW92ZXMgPSBtaXNzaW9uLnN0cmF0ZWdpY01vdmVzLmZpbHRlcigobSkgPT4gbS5pZCAhPT0gbW92ZS5pZCk7CiAgICAgICAgICBtaXNzaW9uLnN0YXR1cyA9IG1pc3Npb25EZXJpdmVkU3RhdHVzKG1pc3Npb24pOwogICAgICAgICAgYXdhaXQgc2F2ZUFuZFJlbmRlcigpOwogICAgICAgIH0pOwoKICAgICAgICBhY3Rpb25zLmFwcGVuZChzdGF0dXNCdG4sIGRlbGV0ZUJ0bik7CiAgICAgICAgcm93LmFwcGVuZChsZWZ0LCBhY3Rpb25zKTsKICAgICAgICBtb3ZlV3JhcC5hcHBlbmQocm93KTsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IHRvcCA9IG5vZGUucXVlcnlTZWxlY3RvcigiLm1pc3Npb24tdG9wIik7CiAgICBjb25zdCBzdGF0dXNDeWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgc3RhdHVzQ3ljbGUudHlwZSA9ICJidXR0b24iOwogICAgc3RhdHVzQ3ljbGUudGV4dENvbnRlbnQgPSAiQ3ljbGUgTWlzc2lvbiI7CiAgICBzdGF0dXNDeWNsZS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKICAgICAgbWlzc2lvbi5zdGF0dXMgPSBuZXh0U3RhdHVzKG1pc3Npb24uc3RhdHVzKTsKICAgICAgYXdhaXQgc2F2ZUFuZFJlbmRlcigpOwogICAgfSk7CgogICAgY29uc3QgcmVtb3ZlTWlzc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgcmVtb3ZlTWlzc2lvbi50eXBlID0gImJ1dHRvbiI7CiAgICByZW1vdmVNaXNzaW9uLnRleHRDb250ZW50ID0gIkRlbGV0ZSI7CiAgICByZW1vdmVNaXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYXN5bmMgKCkgPT4gewogICAgICBzdGF0ZS5taXNzaW9ucyA9IHN0YXRlLm1pc3Npb25zLmZpbHRlcigobSkgPT4gbS5pZCAhPT0gbWlzc2lvbi5pZCk7CiAgICAgIGlmIChzZWxlY3RlZE1pc3Npb25JZCA9PT0gbWlzc2lvbi5pZCkgewogICAgICAgIHNlbGVjdGVkTWlzc2lvbklkID0gbnVsbDsKICAgICAgfQogICAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgICB9KTsKCiAgICBjb25zdCBpbnNwZWN0TWlzc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgaW5zcGVjdE1pc3Npb24udHlwZSA9ICJidXR0b24iOwogICAgaW5zcGVjdE1pc3Npb24udGV4dENvbnRlbnQgPSAiSW5zcGVjdCI7CiAgICBpbnNwZWN0TWlzc2lvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IG9wZW5NaXNzaW9uRHJhd2VyKG1pc3Npb24uaWQpKTsKCiAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgY29udHJvbHMuY2xhc3NOYW1lID0gImFjdGlvbi1yb3ciOwogICAgY29udHJvbHMuYXBwZW5kKGluc3BlY3RNaXNzaW9uLCBzdGF0dXNDeWNsZSwgcmVtb3ZlTWlzc2lvbik7CiAgICB0b3AuYXBwZW5kKGNvbnRyb2xzKTsKCiAgICBtaXNzaW9uc0xpc3QuYXBwZW5kKG5vZGUpOwogIH0KfQoKZnVuY3Rpb24gaHlkcmF0ZU1vdmVQaGFzZVNlbGVjdChzZWxlY3QsIHBoYXNlcykgewogIHNlbGVjdC5pbm5lckhUTUwgPSAiIjsKICBpZiAoIXBoYXNlcy5sZW5ndGgpIHsKICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICBwbGFjZWhvbGRlci52YWx1ZSA9ICIiOwogICAgcGxhY2Vob2xkZXIudGV4dENvbnRlbnQgPSAiQWRkIHBoYXNlIGZpcnN0IjsKICAgIHNlbGVjdC5hcHBlbmQocGxhY2Vob2xkZXIpOwogICAgcmV0dXJuOwogIH0KCiAgZm9yIChjb25zdCBwaGFzZSBvZiBwaGFzZXMpIHsKICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgb3B0aW9uLnZhbHVlID0gcGhhc2UuaWQ7CiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBwaGFzZS50aXRsZTsKICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTsKICB9Cn0KCmZ1bmN0aW9uIHJlbmRlckxldmVyYWdlKCkgewogIGNvbnN0IGNvdW50cyA9IGxldmVyYWdlQ291bnRzKCk7CgogIGRyYXdMZXZlcmFnZUNoYXJ0KGNvdW50cyk7CgogIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXMoY291bnRzKTsKICBjb25zdCBtaW4gPSBNYXRoLm1pbiguLi52YWx1ZXMpOwogIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLnZhbHVlcyk7CiAgY29uc3QgZ2FwVHlwZXMgPSBMRVZFUkFHRV9UWVBFUy5maWx0ZXIoKHR5cGUpID0+IGNvdW50c1t0eXBlXSA9PT0gbWluKTsKICBsZXZlcmFnZUdhcEVsLnRleHRDb250ZW50ID0gYFN0cmF0ZWdpYyBnYXA6ICR7Z2FwVHlwZXMuam9pbigiLCAiKX0gKCR7bWlufSkg4oCiIE1heCBjb25jZW50cmF0aW9uOiAke21heH1gOwp9CgpmdW5jdGlvbiBkcmF3TGV2ZXJhZ2VDaGFydChjb3VudHMpIHsKICBjb25zdCBjdHggPSBsZXZlcmFnZUNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogIGNvbnN0IHdpZHRoID0gbGV2ZXJhZ2VDYW52YXMud2lkdGg7CiAgY29uc3QgaGVpZ2h0ID0gbGV2ZXJhZ2VDYW52YXMuaGVpZ2h0OwogIGNvbnN0IGNlbnRlclggPSB3aWR0aCAvIDI7CiAgY29uc3QgY2VudGVyWSA9IGhlaWdodCAvIDI7CiAgY29uc3QgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgKiAwLjM2OwogIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgoMSwgLi4uT2JqZWN0LnZhbHVlcyhjb3VudHMpKTsKCiAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKCiAgY3R4LnN0cm9rZVN0eWxlID0gInJnYmEoMTM4LDEzOCwxNTAsMC4zMikiOwogIGN0eC5saW5lV2lkdGggPSAxOwogIGZvciAobGV0IHJpbmcgPSAxOyByaW5nIDw9IDQ7IHJpbmcgKz0gMSkgewogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4LmFyYyhjZW50ZXJYLCBjZW50ZXJZLCAocmFkaXVzICogcmluZykgLyA0LCAwLCBNYXRoLlBJICogMik7CiAgICBjdHguc3Ryb2tlKCk7CiAgfQoKICBjb25zdCBwb2ludHMgPSBbXTsKICBMRVZFUkFHRV9UWVBFUy5mb3JFYWNoKCh0eXBlLCBpbmRleCkgPT4gewogICAgY29uc3QgYW5nbGUgPSAtTWF0aC5QSSAvIDIgKyAoaW5kZXggLyBMRVZFUkFHRV9UWVBFUy5sZW5ndGgpICogTWF0aC5QSSAqIDI7CiAgICBjb25zdCBheGlzWCA9IGNlbnRlclggKyBNYXRoLmNvcyhhbmdsZSkgKiByYWRpdXM7CiAgICBjb25zdCBheGlzWSA9IGNlbnRlclkgKyBNYXRoLnNpbihhbmdsZSkgKiByYWRpdXM7CgogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIGN0eC5saW5lVG8oYXhpc1gsIGF4aXNZKTsKICAgIGN0eC5zdHJva2VTdHlsZSA9ICJyZ2JhKDEzOCwxMzgsMTUwLDAuMjUpIjsKICAgIGN0eC5zdHJva2UoKTsKCiAgICBjdHguZmlsbFN0eWxlID0gIiNhOWE5YjQiOwogICAgY3R4LmZvbnQgPSAiMTJweCBJbnRlciwgc2Fucy1zZXJpZiI7CiAgICBjdHgudGV4dEFsaWduID0gImNlbnRlciI7CiAgICBjdHguZmlsbFRleHQodHlwZSwgY2VudGVyWCArIE1hdGguY29zKGFuZ2xlKSAqIChyYWRpdXMgKyAxOCksIGNlbnRlclkgKyBNYXRoLnNpbihhbmdsZSkgKiAocmFkaXVzICsgMTgpKTsKCiAgICBjb25zdCBzY2FsZWQgPSAoY291bnRzW3R5cGVdIC8gbWF4VmFsdWUpICogcmFkaXVzOwogICAgcG9pbnRzLnB1c2goewogICAgICB4OiBjZW50ZXJYICsgTWF0aC5jb3MoYW5nbGUpICogc2NhbGVkLAogICAgICB5OiBjZW50ZXJZICsgTWF0aC5zaW4oYW5nbGUpICogc2NhbGVkCiAgICB9KTsKICB9KTsKCiAgY3R4LmJlZ2luUGF0aCgpOwogIHBvaW50cy5mb3JFYWNoKChwb2ludCwgaW5kZXgpID0+IHsKICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICBjdHgubW92ZVRvKHBvaW50LngsIHBvaW50LnkpOwogICAgfSBlbHNlIHsKICAgICAgY3R4LmxpbmVUbyhwb2ludC54LCBwb2ludC55KTsKICAgIH0KICB9KTsKICBjdHguY2xvc2VQYXRoKCk7CiAgY3R4LmZpbGxTdHlsZSA9ICJyZ2JhKDEzOCwxMzgsMTUwLDAuMzQpIjsKICBjdHguc3Ryb2tlU3R5bGUgPSAicmdiYSgyMjAsMjIwLDIzMCwwLjc2KSI7CiAgY3R4LmxpbmVXaWR0aCA9IDEuNDsKICBjdHguZmlsbCgpOwogIGN0eC5zdHJva2UoKTsKfQoKZnVuY3Rpb24gZHJhd1Jpc2tHcmlkQmFzZSgpIHsKICByaXNrR3JpZEVsLmlubmVySFRNTCA9ICIiOwogIGZvciAobGV0IHJvdyA9IDEwOyByb3cgPj0gMTsgcm93IC09IDEpIHsKICAgIGZvciAobGV0IGNvbCA9IDE7IGNvbCA8PSAxMDsgY29sICs9IDEpIHsKICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBjZWxsLmNsYXNzTmFtZSA9ICJyaXNrLWNlbGwiOwogICAgICBjZWxsLmRhdGFzZXQuY2VsbCA9IGAke3Jvd30tJHtjb2x9YDsKICAgICAgcmlza0dyaWRFbC5hcHBlbmQoY2VsbCk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiByZW5kZXJSaXNrcygpIHsKICBjb25zdCBjZWxscyA9IEFycmF5LmZyb20ocmlza0dyaWRFbC5jaGlsZHJlbik7CiAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4gY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKSk7CgogIGxldCBzdW0gPSAwOwogIGxldCBwZWFrID0gMDsKICByaXNrTGlzdEVsLmlubmVySFRNTCA9ICIiOwoKICBmb3IgKGNvbnN0IHJpc2sgb2Ygc3RhdGUucmlza1BvaW50cykgewogICAgY29uc3QgZXhwb3N1cmUgPSByaXNrLnByb2JhYmlsaXR5ICogcmlzay5pbXBhY3Q7CiAgICBzdW0gKz0gZXhwb3N1cmU7CiAgICBwZWFrID0gTWF0aC5tYXgocGVhaywgZXhwb3N1cmUpOwoKICAgIGNvbnN0IGtleSA9IGAke3Jpc2suaW1wYWN0fS0ke3Jpc2sucHJvYmFiaWxpdHl9YDsKICAgIGNvbnN0IGNlbGwgPSBjZWxscy5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFzZXQuY2VsbCA9PT0ga2V5KTsKICAgIGlmIChjZWxsKSB7CiAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7CiAgICB9CgogICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICByb3cuY2xhc3NOYW1lID0gInJpc2stcm93IjsKCiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBsZWZ0LmlubmVySFRNTCA9IGA8ZGl2PiR7ZXNjYXBlSFRNTChyaXNrLnRpdGxlKX08L2Rpdj48c21hbGw+UCR7cmlzay5wcm9iYWJpbGl0eX0geCBJJHtyaXNrLmltcGFjdH0gPSAke2V4cG9zdXJlfTwvc21hbGw+YDsKCiAgICBjb25zdCBhY3Rpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBhY3Rpb25zLmNsYXNzTmFtZSA9ICJhY3Rpb24tcm93IjsKCiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgIGRlbGV0ZUJ0bi50eXBlID0gImJ1dHRvbiI7CiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAiUmVtb3ZlIjsKICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKICAgICAgc3RhdGUucmlza1BvaW50cyA9IHN0YXRlLnJpc2tQb2ludHMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmlkICE9PSByaXNrLmlkKTsKICAgICAgYXdhaXQgc2F2ZUFuZFJlbmRlcigpOwogICAgfSk7CgogICAgYWN0aW9ucy5hcHBlbmQoZGVsZXRlQnRuKTsKICAgIHJvdy5hcHBlbmQobGVmdCwgYWN0aW9ucyk7CiAgICByaXNrTGlzdEVsLmFwcGVuZChyb3cpOwogIH0KCiAgY29uc3QgYXZnID0gc3RhdGUucmlza1BvaW50cy5sZW5ndGggPyAoc3VtIC8gc3RhdGUucmlza1BvaW50cy5sZW5ndGgpLnRvRml4ZWQoMSkgOiAiMCI7CiAgcmlza1RvdGFsRWwudGV4dENvbnRlbnQgPSBgVG90YWwgUmlza3M6ICR7c3RhdGUucmlza1BvaW50cy5sZW5ndGh9YDsKICBhdmdFeHBvc3VyZUVsLnRleHRDb250ZW50ID0gYEF2ZXJhZ2UgRXhwb3N1cmU6ICR7YXZnfWA7CiAgcGVha0V4cG9zdXJlRWwudGV4dENvbnRlbnQgPSBgUGVhayBFeHBvc3VyZTogJHtwZWFrfWA7CgogIGlmICghc3RhdGUucmlza1BvaW50cy5sZW5ndGgpIHsKICAgIHJpc2tMaXN0RWwuYXBwZW5kKG1ha2VNZXRhKCJObyByaXNrIHBvaW50cyBsb2dnZWQuIikpOwogIH0KfQoKZnVuY3Rpb24gcmVuZGVyTW9tZW50dW0oKSB7CiAgbW9tZW50dW1CYXJzRWwuaW5uZXJIVE1MID0gIiI7CiAgY29uc3QgbG9ncyA9IFsuLi5zdGF0ZS5tb21lbnR1bUxvZ3NdLnNvcnQoKGEsIGIpID0+IGEud2Vlay5sb2NhbGVDb21wYXJlKGIud2VlaykpOwoKICBsb2dzLmZvckVhY2goKGxvZykgPT4gewogICAgY29uc3QgYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBiYXIuY2xhc3NOYW1lID0gImJhciI7CiAgICBjb25zdCB3ZWVrTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB3ZWVrTGFiZWwudGV4dENvbnRlbnQgPSBzaG9ydERhdGUobG9nLndlZWspOwoKICAgIGNvbnN0IHRyYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICB0cmFjay5jbGFzc05hbWUgPSAiYmFyLXRyYWNrIjsKICAgIGNvbnN0IGZpbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGZpbGwuY2xhc3NOYW1lID0gImJhci1maWxsIjsKICAgIGZpbGwuc3R5bGUud2lkdGggPSBgJHsobG9nLnNjb3JlIC8gMTApICogMTAwfSVgOwogICAgdHJhY2suYXBwZW5kKGZpbGwpOwoKICAgIGNvbnN0IHZhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIpOwogICAgdmFsLnRleHRDb250ZW50ID0gYCR7bG9nLnNjb3JlfWA7CgogICAgYmFyLmFwcGVuZCh3ZWVrTGFiZWwsIHRyYWNrLCB2YWwpOwogICAgbW9tZW50dW1CYXJzRWwuYXBwZW5kKGJhcik7CiAgfSk7CgogIGlmICghbG9ncy5sZW5ndGgpIHsKICAgIG1vbWVudHVtQmFyc0VsLmFwcGVuZChtYWtlTWV0YSgiTm8gbW9tZW50dW0gbG9ncyB5ZXQuIikpOwogIH0KCiAgY29uc3QgdHJlbmQgPSBtb21lbnR1bVRyZW5kKGxvZ3MpOwogIG1vbWVudHVtVHJlbmRFbC50ZXh0Q29udGVudCA9IGBUcmVuZDogJHt0cmVuZH1gOwogIG1vbWVudHVtVHJlbmRFbC5jbGFzc0xpc3QucmVtb3ZlKCJ3YXJuIiwgImdvb2QiKTsKICBpZiAodHJlbmQgPT09ICJBY2NlbGVyYXRpbmciKSB7CiAgICBtb21lbnR1bVRyZW5kRWwuY2xhc3NMaXN0LmFkZCgiZ29vZCIpOwogIH0gZWxzZSBpZiAodHJlbmQgPT09ICJEZWNlbGVyYXRpbmciKSB7CiAgICBtb21lbnR1bVRyZW5kRWwuY2xhc3NMaXN0LmFkZCgid2FybiIpOwogIH0KCiAgY29uc3Qgc3RhZ25hdGlvbiA9IHN0YWduYXRpb25TdGF0ZShsb2dzKTsKICBzdGFnbmF0aW9uQWxlcnRFbC50ZXh0Q29udGVudCA9IGBTdGFnbmF0aW9uOiAke3N0YWduYXRpb259YDsKICBzdGFnbmF0aW9uQWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCJ3YXJuIiwgImdvb2QiKTsKICBpZiAoc3RhZ25hdGlvbi5pbmNsdWRlcygiQWxlcnQiKSkgewogICAgc3RhZ25hdGlvbkFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgid2FybiIpOwogIH0gZWxzZSBpZiAoc3RhZ25hdGlvbi5pbmNsdWRlcygiQ2xlYXIiKSkgewogICAgc3RhZ25hdGlvbkFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgiZ29vZCIpOwogIH0KfQoKZnVuY3Rpb24gbW9tZW50dW1UcmVuZChsb2dzKSB7CiAgaWYgKGxvZ3MubGVuZ3RoIDwgMykgewogICAgcmV0dXJuICJJbnN1ZmZpY2llbnQgZGF0YSI7CiAgfQoKICBjb25zdCBsYXN0MyA9IGxvZ3Muc2xpY2UoLTMpLm1hcCgoZW50cnkpID0+IGVudHJ5LnNjb3JlKTsKICBjb25zdCBkaWZmQSA9IGxhc3QzWzFdIC0gbGFzdDNbMF07CiAgY29uc3QgZGlmZkIgPSBsYXN0M1syXSAtIGxhc3QzWzFdOwoKICBpZiAoZGlmZkEgPiAwICYmIGRpZmZCID4gMCkgewogICAgcmV0dXJuICJBY2NlbGVyYXRpbmciOwogIH0KCiAgaWYgKGRpZmZBIDwgMCAmJiBkaWZmQiA8IDApIHsKICAgIHJldHVybiAiRGVjZWxlcmF0aW5nIjsKICB9CgogIHJldHVybiAiU3RlYWR5IjsKfQoKZnVuY3Rpb24gc3RhZ25hdGlvblN0YXRlKGxvZ3MpIHsKICBpZiAobG9ncy5sZW5ndGggPCA0KSB7CiAgICByZXR1cm4gIkluc3VmZmljaWVudCBkYXRhIjsKICB9CgogIGNvbnN0IGxhc3Q0ID0gbG9ncy5zbGljZSgtNCkubWFwKChlbnRyeSkgPT4gZW50cnkuc2NvcmUpOwogIGNvbnN0IG1pbiA9IE1hdGgubWluKC4uLmxhc3Q0KTsKICBjb25zdCBtYXggPSBNYXRoLm1heCguLi5sYXN0NCk7CgogIGlmIChtYXggLSBtaW4gPD0gMSkgewogICAgcmV0dXJuICJBbGVydDogZmxhdCA0LXdlZWsgcGF0dGVybiI7CiAgfQoKICByZXR1cm4gIkNsZWFyIjsKfQoKZnVuY3Rpb24gbWlzc2lvbkRlcml2ZWRTdGF0dXMobWlzc2lvbikgewogIGlmICghbWlzc2lvbi5zdHJhdGVnaWNNb3Zlcy5sZW5ndGgpIHsKICAgIHJldHVybiAiUGxhbm5pbmciOwogIH0KCiAgaWYgKG1pc3Npb24uc3RyYXRlZ2ljTW92ZXMuZXZlcnkoKG1vdmUpID0+IG1vdmUuc3RhdHVzID09PSAiQ29tcGxldGVkIikpIHsKICAgIHJldHVybiAiQ29tcGxldGVkIjsKICB9CgogIGlmIChtaXNzaW9uLnN0cmF0ZWdpY01vdmVzLnNvbWUoKG1vdmUpID0+IG1vdmUuc3RhdHVzID09PSAiQWN0aXZlIikpIHsKICAgIHJldHVybiAiQWN0aXZlIjsKICB9CgogIGlmIChtaXNzaW9uLnN0cmF0ZWdpY01vdmVzLmV2ZXJ5KChtb3ZlKSA9PiBtb3ZlLnN0YXR1cyA9PT0gIkFiYW5kb25lZCIpKSB7CiAgICByZXR1cm4gIkFiYW5kb25lZCI7CiAgfQoKICByZXR1cm4gIlBsYW5uaW5nIjsKfQoKZnVuY3Rpb24gbmV4dFN0YXR1cyhjdXJyZW50KSB7CiAgY29uc3QgaWR4ID0gTUlTU0lPTl9TVEFUVVMuaW5kZXhPZihjdXJyZW50KTsKICBpZiAoaWR4ID09PSAtMSkgewogICAgcmV0dXJuIE1JU1NJT05fU1RBVFVTWzBdOwogIH0KICByZXR1cm4gTUlTU0lPTl9TVEFUVVNbKGlkeCArIDEpICUgTUlTU0lPTl9TVEFUVVMubGVuZ3RoXTsKfQoKZnVuY3Rpb24gdG9nZ2xlQ29uY2VhbG1lbnQoKSB7CiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCJjb25jZWFsZWQiKTsKfQoKZnVuY3Rpb24gb3Blbk1pc3Npb25EcmF3ZXIobWlzc2lvbklkKSB7CiAgaWYgKCFpc1VubG9ja2VkKSB7CiAgICBzZXRWYXVsdFN0YXR1cygiVmF1bHQgaXMgbG9ja2VkLiBVbmxvY2sgdG8gaW5zcGVjdCBtaXNzaW9uIGRldGFpbHMuIiwgdHJ1ZSk7CiAgICByZXR1cm47CiAgfQogIHNlbGVjdGVkTWlzc2lvbklkID0gbWlzc2lvbklkOwogIHJlbmRlck1pc3Npb25EcmF3ZXIoKTsKICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoImRyYXdlci1vcGVuIik7CiAgZHJhd2VyQmFja2Ryb3AuaGlkZGVuID0gZmFsc2U7CiAgbWlzc2lvbkRyYXdlci5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwgImZhbHNlIik7Cn0KCmZ1bmN0aW9uIGNsb3NlTWlzc2lvbkRyYXdlcigpIHsKICBzZWxlY3RlZE1pc3Npb25JZCA9IG51bGw7CiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJkcmF3ZXItb3BlbiIpOwogIGRyYXdlckJhY2tkcm9wLmhpZGRlbiA9IHRydWU7CiAgbWlzc2lvbkRyYXdlci5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwgInRydWUiKTsKfQoKZnVuY3Rpb24gZ2V0U2VsZWN0ZWRNaXNzaW9uKCkgewogIGlmICghc2VsZWN0ZWRNaXNzaW9uSWQpIHsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gc3RhdGUubWlzc2lvbnMuZmluZCgobWlzc2lvbikgPT4gbWlzc2lvbi5pZCA9PT0gc2VsZWN0ZWRNaXNzaW9uSWQpIHx8IG51bGw7Cn0KCmZ1bmN0aW9uIHJlbmRlck1pc3Npb25EcmF3ZXIoKSB7CiAgaWYgKCFzZWxlY3RlZE1pc3Npb25JZCkgewogICAgY2xvc2VNaXNzaW9uRHJhd2VyKCk7CiAgICByZXR1cm47CiAgfQoKICBjb25zdCBtaXNzaW9uID0gZ2V0U2VsZWN0ZWRNaXNzaW9uKCk7CiAgaWYgKCFtaXNzaW9uKSB7CiAgICBzZWxlY3RlZE1pc3Npb25JZCA9IG51bGw7CiAgICBjbG9zZU1pc3Npb25EcmF3ZXIoKTsKICAgIHJldHVybjsKICB9CgogIGRyYXdlclRpdGxlRWwudGV4dENvbnRlbnQgPSBtaXNzaW9uLnRpdGxlOwogIGRyYXdlclN1YnRpdGxlRWwudGV4dENvbnRlbnQgPSBgJHttaXNzaW9uLmhvcml6b25ZZWFyc30teWVhciBhcmMg4oCiICR7bWlzc2lvbi5zdGF0dXN9IOKAoiAke21pc3Npb24ucGhhc2VzLmxlbmd0aH0gcGhhc2VzIOKAoiAke21pc3Npb24uc3RyYXRlZ2ljTW92ZXMubGVuZ3RofSBtb3Zlc2A7CgogIGRyYXdlclBoYXNlc0VsLmlubmVySFRNTCA9ICIiOwogIGlmICghbWlzc2lvbi5waGFzZXMubGVuZ3RoKSB7CiAgICBkcmF3ZXJQaGFzZXNFbC5hcHBlbmQobWFrZU1ldGEoIk5vIHBoYXNlcyB5ZXQuIikpOwogIH0gZWxzZSB7CiAgICBmb3IgKGNvbnN0IHBoYXNlIG9mIG1pc3Npb24ucGhhc2VzKSB7CiAgICAgIGNvbnN0IHBoYXNlTW92ZXMgPSBtaXNzaW9uLnN0cmF0ZWdpY01vdmVzLmZpbHRlcigobW92ZSkgPT4gbW92ZS5waGFzZUlkID09PSBwaGFzZS5pZCkubGVuZ3RoOwogICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgcm93LmNsYXNzTmFtZSA9ICJkYXNoYm9hcmQtcm93IjsKICAgICAgcm93LmlubmVySFRNTCA9IGA8ZGl2PiR7ZXNjYXBlSFRNTChwaGFzZS50aXRsZSl9PC9kaXY+PHNtYWxsPiR7cGhhc2VNb3Zlc30gbW92ZXM8L3NtYWxsPmA7CiAgICAgIGRyYXdlclBoYXNlc0VsLmFwcGVuZChyb3cpOwogICAgfQogIH0KCiAgaHlkcmF0ZU1vdmVQaGFzZVNlbGVjdChkcmF3ZXJNb3ZlUGhhc2VTZWxlY3QsIG1pc3Npb24ucGhhc2VzKTsKCiAgZHJhd2VyTW92ZXNFbC5pbm5lckhUTUwgPSAiIjsKICBpZiAoIW1pc3Npb24uc3RyYXRlZ2ljTW92ZXMubGVuZ3RoKSB7CiAgICBkcmF3ZXJNb3Zlc0VsLmFwcGVuZChtYWtlTWV0YSgiTm8gc3RyYXRlZ2ljIG1vdmVzIHlldC4iKSk7CiAgfSBlbHNlIHsKICAgIGZvciAoY29uc3QgbW92ZSBvZiBtaXNzaW9uLnN0cmF0ZWdpY01vdmVzKSB7CiAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICByb3cuY2xhc3NOYW1lID0gIm1vdmUtcm93IjsKICAgICAgY29uc3QgcGhhc2UgPSBtaXNzaW9uLnBoYXNlcy5maW5kKChpdGVtKSA9PiBpdGVtLmlkID09PSBtb3ZlLnBoYXNlSWQpOwogICAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGxlZnQuaW5uZXJIVE1MID0gYDxkaXY+JHtlc2NhcGVIVE1MKG1vdmUudGl0bGUpfTwvZGl2PjxzbWFsbD4ke21vdmUubGV2ZXJhZ2VUeXBlfSR7cGhhc2UgPyBgIOKAoiAke2VzY2FwZUhUTUwocGhhc2UudGl0bGUpfWAgOiAiIn08L3NtYWxsPmA7CiAgICAgIGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgYWN0aW9ucy5jbGFzc05hbWUgPSAiYWN0aW9uLXJvdyI7CgogICAgICBjb25zdCBzdGF0dXNCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgc3RhdHVzQnRuLnR5cGUgPSAiYnV0dG9uIjsKICAgICAgc3RhdHVzQnRuLnRleHRDb250ZW50ID0gbW92ZS5zdGF0dXM7CiAgICAgIHN0YXR1c0J0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKICAgICAgICBtb3ZlLnN0YXR1cyA9IG5leHRTdGF0dXMobW92ZS5zdGF0dXMpOwogICAgICAgIG1pc3Npb24uc3RhdHVzID0gbWlzc2lvbkRlcml2ZWRTdGF0dXMobWlzc2lvbik7CiAgICAgICAgYXdhaXQgc2F2ZUFuZFJlbmRlcigpOwogICAgICB9KTsKCiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICBkZWxldGVCdG4udHlwZSA9ICJidXR0b24iOwogICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAiUmVtb3ZlIjsKICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYXN5bmMgKCkgPT4gewogICAgICAgIG1pc3Npb24uc3RyYXRlZ2ljTW92ZXMgPSBtaXNzaW9uLnN0cmF0ZWdpY01vdmVzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gbW92ZS5pZCk7CiAgICAgICAgbWlzc2lvbi5zdGF0dXMgPSBtaXNzaW9uRGVyaXZlZFN0YXR1cyhtaXNzaW9uKTsKICAgICAgICBhd2FpdCBzYXZlQW5kUmVuZGVyKCk7CiAgICAgIH0pOwoKICAgICAgYWN0aW9ucy5hcHBlbmQoc3RhdHVzQnRuLCBkZWxldGVCdG4pOwogICAgICByb3cuYXBwZW5kKGxlZnQsIGFjdGlvbnMpOwogICAgICBkcmF3ZXJNb3Zlc0VsLmFwcGVuZChyb3cpOwogICAgfQogIH0KCiAgY29uc3QgY291bnRzID0gbWlzc2lvbkxldmVyYWdlQ291bnRzKG1pc3Npb24pOwogIGRyYXdlckxldmVyYWdlQmFyc0VsLmlubmVySFRNTCA9ICIiOwogIGNvbnN0IG1heENvdW50ID0gTWF0aC5tYXgoMSwgLi4uT2JqZWN0LnZhbHVlcyhjb3VudHMpKTsKICBmb3IgKGNvbnN0IHR5cGUgb2YgTEVWRVJBR0VfVFlQRVMpIHsKICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgcm93LmNsYXNzTmFtZSA9ICJsZXZlci1yb3ciOwogICAgY29uc3Qgd2lkdGggPSAoY291bnRzW3R5cGVdIC8gbWF4Q291bnQpICogMTAwOwogICAgcm93LmlubmVySFRNTCA9IGA8c3Bhbj4ke3R5cGV9PC9zcGFuPjxkaXYgY2xhc3M9ImxldmVyLXRyYWNrIj48ZGl2IGNsYXNzPSJsZXZlci1maWxsIiBzdHlsZT0id2lkdGg6JHt3aWR0aH0lIj48L2Rpdj48L2Rpdj48c3Ryb25nPiR7Y291bnRzW3R5cGVdfTwvc3Ryb25nPmA7CiAgICBkcmF3ZXJMZXZlcmFnZUJhcnNFbC5hcHBlbmQocm93KTsKICB9Cn0KCmZ1bmN0aW9uIHNldFZpZXcodmlld05hbWUpIHsKICBhY3RpdmVWaWV3ID0gdmlld05hbWU7CiAgY29uc3Qgdmlld3MgPSBbImRhc2hib2FyZCIsICJtaXNzaW9ucyIsICJyaXNrIiwgIm1vbWVudHVtIl07CiAgZm9yIChjb25zdCB2aWV3IG9mIHZpZXdzKSB7CiAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHZpZXctJHt2aWV3fWApOwogICAgaWYgKCFub2RlKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbm9kZS5jbGFzc0xpc3QudG9nZ2xlKCJoaWRkZW4tdmlldyIsIHZpZXcgIT09IHZpZXdOYW1lKTsKICB9CgogIGZvciAoY29uc3QgYnRuIG9mIG5hdkJ1dHRvbnMpIHsKICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCJhY3RpdmUiLCBidG4uZGF0YXNldC52aWV3ID09PSB2aWV3TmFtZSk7CiAgfQp9CgpmdW5jdGlvbiBsZXZlcmFnZUNvdW50cygpIHsKICBjb25zdCBjb3VudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoTEVWRVJBR0VfVFlQRVMubWFwKCh0eXBlKSA9PiBbdHlwZSwgMF0pKTsKICBmb3IgKGNvbnN0IG1pc3Npb24gb2Ygc3RhdGUubWlzc2lvbnMpIHsKICAgIGZvciAoY29uc3QgbW92ZSBvZiBtaXNzaW9uLnN0cmF0ZWdpY01vdmVzKSB7CiAgICAgIGNvdW50c1ttb3ZlLmxldmVyYWdlVHlwZV0gKz0gMTsKICAgIH0KICB9CiAgcmV0dXJuIGNvdW50czsKfQoKZnVuY3Rpb24gbWlzc2lvbkxldmVyYWdlQ291bnRzKG1pc3Npb24pIHsKICBjb25zdCBjb3VudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoTEVWRVJBR0VfVFlQRVMubWFwKCh0eXBlKSA9PiBbdHlwZSwgMF0pKTsKICBmb3IgKGNvbnN0IG1vdmUgb2YgbWlzc2lvbi5zdHJhdGVnaWNNb3ZlcykgewogICAgY291bnRzW21vdmUubGV2ZXJhZ2VUeXBlXSArPSAxOwogIH0KICByZXR1cm4gY291bnRzOwp9CgpmdW5jdGlvbiBidW1wQXV0b0xvY2tUaW1lcigpIHsKICBjbGVhckF1dG9Mb2NrVGltZXIoKTsKICBhdXRvTG9ja1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICBpZiAoaXNVbmxvY2tlZCkgewogICAgICBsb2NrVmF1bHRVSSgiQXV0by1sb2NrZWQgYWZ0ZXIgMTAgbWludXRlcyBvZiBpbmFjdGl2aXR5LiIpOwogICAgfQogIH0sIEFVVE9fTE9DS19NUyk7Cn0KCmZ1bmN0aW9uIGNsZWFyQXV0b0xvY2tUaW1lcigpIHsKICBpZiAoYXV0b0xvY2tUaW1lcikgewogICAgY2xlYXJUaW1lb3V0KGF1dG9Mb2NrVGltZXIpOwogICAgYXV0b0xvY2tUaW1lciA9IG51bGw7CiAgfQp9Cgphc3luYyBmdW5jdGlvbiBzYXZlQW5kUmVuZGVyKCkgewogIGlmIChpc1VubG9ja2VkICYmIHNlc3Npb25QYXNzcGhyYXNlKSB7CiAgICBhd2FpdCBwZXJzaXN0RW5jcnlwdGVkU3RhdGUoc2Vzc2lvblBhc3NwaHJhc2UpOwogIH0KICByZW5kZXJBbGwoKTsKfQoKYXN5bmMgZnVuY3Rpb24gcGVyc2lzdEVuY3J5cHRlZFN0YXRlKHBhc3NwaHJhc2UpIHsKICBjb25zdCBwYXlsb2FkID0gYXdhaXQgZW5jcnlwdFN0YXRlKHBhc3NwaHJhc2UsIHN0YXRlKTsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShFTkNSWVBURURfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTsKfQoKZnVuY3Rpb24gbG9hZExlZ2FjeVN0YXRlKCkgewogIHRyeSB7CiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMRUdBQ1lfU1RPUkFHRV9LRVkpOwogICAgaWYgKCFyYXcpIHsKICAgICAgcmV0dXJuIGZyZXNoU3RhdGUoKTsKICAgIH0KICAgIHJldHVybiBub3JtYWxpemVTdGF0ZShKU09OLnBhcnNlKHJhdykpOwogIH0gY2F0Y2ggewogICAgcmV0dXJuIGZyZXNoU3RhdGUoKTsKICB9Cn0KCmZ1bmN0aW9uIHJlYWRFbmNyeXB0ZWRQYXlsb2FkKCkgewogIHRyeSB7CiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShFTkNSWVBURURfU1RPUkFHRV9LRVkpOwogICAgaWYgKCFyYXcpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdyk7CiAgICBpZiAoIXBhcnNlZCB8fCB0eXBlb2YgcGFyc2VkICE9PSAib2JqZWN0IikgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHJldHVybiBwYXJzZWQ7CiAgfSBjYXRjaCB7CiAgICByZXR1cm4gbnVsbDsKICB9Cn0KCmFzeW5jIGZ1bmN0aW9uIGVuY3J5cHRTdGF0ZShwYXNzcGhyYXNlLCBjbGVhclN0YXRlKSB7CiAgY29uc3Qgc2FsdCA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTYpKTsKICBjb25zdCBpdiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTIpKTsKICBjb25zdCBrZXkgPSBhd2FpdCBkZXJpdmVBZXNLZXkocGFzc3BocmFzZSwgc2FsdCwgS0RGX0lURVJBVElPTlMpOwogIGNvbnN0IHBsYWludGV4dCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKU09OLnN0cmluZ2lmeShjbGVhclN0YXRlKSk7CiAgY29uc3QgZW5jcnlwdGVkID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHsgbmFtZTogIkFFUy1HQ00iLCBpdiB9LCBrZXksIHBsYWludGV4dCk7CgogIHJldHVybiB7CiAgICB2OiAxLAogICAga2RmOiAiUEJLREYyLVNIQTI1NiIsCiAgICBpdGVyYXRpb25zOiBLREZfSVRFUkFUSU9OUywKICAgIHNhbHQ6IGJ5dGVzVG9CYXNlNjQoc2FsdCksCiAgICBpdjogYnl0ZXNUb0Jhc2U2NChpdiksCiAgICBjaXBoZXJ0ZXh0OiBieXRlc1RvQmFzZTY0KG5ldyBVaW50OEFycmF5KGVuY3J5cHRlZCkpCiAgfTsKfQoKYXN5bmMgZnVuY3Rpb24gZGVjcnlwdFN0YXRlKHBhc3NwaHJhc2UsIHBheWxvYWQpIHsKICBjb25zdCBzYWx0ID0gYmFzZTY0VG9CeXRlcyhwYXlsb2FkLnNhbHQpOwogIGNvbnN0IGl2ID0gYmFzZTY0VG9CeXRlcyhwYXlsb2FkLml2KTsKICBjb25zdCBjaXBoZXJ0ZXh0ID0gYmFzZTY0VG9CeXRlcyhwYXlsb2FkLmNpcGhlcnRleHQpOwogIGNvbnN0IGl0ZXJhdGlvbnMgPSBOdW1iZXIocGF5bG9hZC5pdGVyYXRpb25zKSB8fCBLREZfSVRFUkFUSU9OUzsKCiAgY29uc3Qga2V5ID0gYXdhaXQgZGVyaXZlQWVzS2V5KHBhc3NwaHJhc2UsIHNhbHQsIGl0ZXJhdGlvbnMpOwogIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7IG5hbWU6ICJBRVMtR0NNIiwgaXYgfSwga2V5LCBjaXBoZXJ0ZXh0KTsKICBjb25zdCB0ZXh0ID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRlY3J5cHRlZCk7CiAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7Cn0KCmFzeW5jIGZ1bmN0aW9uIGRlcml2ZUFlc0tleShwYXNzcGhyYXNlLCBzYWx0LCBpdGVyYXRpb25zKSB7CiAgY29uc3QgYmFzZUtleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KAogICAgInJhdyIsCiAgICBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocGFzc3BocmFzZSksCiAgICB7IG5hbWU6ICJQQktERjIiIH0sCiAgICBmYWxzZSwKICAgIFsiZGVyaXZlS2V5Il0KICApOwoKICByZXR1cm4gY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoCiAgICB7CiAgICAgIG5hbWU6ICJQQktERjIiLAogICAgICBzYWx0LAogICAgICBpdGVyYXRpb25zLAogICAgICBoYXNoOiAiU0hBLTI1NiIKICAgIH0sCiAgICBiYXNlS2V5LAogICAgeyBuYW1lOiAiQUVTLUdDTSIsIGxlbmd0aDogMjU2IH0sCiAgICBmYWxzZSwKICAgIFsiZW5jcnlwdCIsICJkZWNyeXB0Il0KICApOwp9CgpmdW5jdGlvbiBieXRlc1RvQmFzZTY0KGJ5dGVzKSB7CiAgbGV0IGJpbmFyeSA9ICIiOwogIGZvciAoY29uc3QgYnl0ZSBvZiBieXRlcykgewogICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSk7CiAgfQogIHJldHVybiBidG9hKGJpbmFyeSk7Cn0KCmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMoYmFzZTY0KSB7CiAgY29uc3QgYmluYXJ5ID0gYXRvYihiYXNlNjQpOwogIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5Lmxlbmd0aCk7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnkubGVuZ3RoOyBpICs9IDEpIHsKICAgIGJ5dGVzW2ldID0gYmluYXJ5LmNoYXJDb2RlQXQoaSk7CiAgfQogIHJldHVybiBieXRlczsKfQoKZnVuY3Rpb24gc2V0VmF1bHRTdGF0dXMobWVzc2FnZSwgaXNFcnJvciA9IGZhbHNlKSB7CiAgdmF1bHRTdGF0dXNFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7CiAgdmF1bHRTdGF0dXNFbC5jbGFzc0xpc3QudG9nZ2xlKCJ3YXJuIiwgaXNFcnJvcik7CiAgdmF1bHRTdGF0dXNFbC5jbGFzc0xpc3QudG9nZ2xlKCJnb29kIiwgIWlzRXJyb3IgJiYgQm9vbGVhbihtZXNzYWdlKSk7Cn0KCmZ1bmN0aW9uIGZyZXNoU3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIG1pc3Npb25zOiBbXSwKICAgIHJpc2tQb2ludHM6IFtdLAogICAgbW9tZW50dW1Mb2dzOiBbXQogIH07Cn0KCmZ1bmN0aW9uIG5vcm1hbGl6ZVN0YXRlKGlucHV0KSB7CiAgcmV0dXJuIHsKICAgIG1pc3Npb25zOiBBcnJheS5pc0FycmF5KGlucHV0Py5taXNzaW9ucykgPyBpbnB1dC5taXNzaW9ucyA6IFtdLAogICAgcmlza1BvaW50czogQXJyYXkuaXNBcnJheShpbnB1dD8ucmlza1BvaW50cykgPyBpbnB1dC5yaXNrUG9pbnRzIDogW10sCiAgICBtb21lbnR1bUxvZ3M6IEFycmF5LmlzQXJyYXkoaW5wdXQ/Lm1vbWVudHVtTG9ncykgPyBpbnB1dC5tb21lbnR1bUxvZ3MgOiBbXQogIH07Cn0KCmZ1bmN0aW9uIHN0cnVjdHVyZWRDbG9uZVNhZmUodmFsdWUpIHsKICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpOwp9CgpmdW5jdGlvbiByZWdpc3RlclNXKCkgewogIGlmICgic2VydmljZVdvcmtlciIgaW4gbmF2aWdhdG9yKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsICgpID0+IHsKICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoIi4vc2VydmljZS13b3JrZXIuanMiKS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9KTsKICB9Cn0KCmZ1bmN0aW9uIHVpZCgpIHsKICByZXR1cm4gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA4KX1gOwp9CgpmdW5jdGlvbiBpblJhbmdlKHZhbHVlLCBtaW4sIG1heCkgewogIHJldHVybiBOdW1iZXIuaXNGaW5pdGUodmFsdWUpICYmIHZhbHVlID49IG1pbiAmJiB2YWx1ZSA8PSBtYXg7Cn0KCmZ1bmN0aW9uIHRvZGF5SVNPKCkgewogIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApOwp9CgpmdW5jdGlvbiBzaG9ydERhdGUodmFsdWUpIHsKICBjb25zdCBkID0gbmV3IERhdGUoYCR7dmFsdWV9VDAwOjAwOjAwYCk7CiAgaWYgKE51bWJlci5pc05hTihkLmdldFRpbWUoKSkpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9CiAgcmV0dXJuIGQudG9Mb2NhbGVEYXRlU3RyaW5nKHVuZGVmaW5lZCwgeyBtb250aDogInNob3J0IiwgZGF5OiAibnVtZXJpYyIgfSk7Cn0KCmZ1bmN0aW9uIG1ha2VNZXRhKHRleHQpIHsKICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpOwogIHAuY2xhc3NOYW1lID0gIm1ldGEiOwogIHAudGV4dENvbnRlbnQgPSB0ZXh0OwogIHJldHVybiBwOwp9CgpmdW5jdGlvbiBlc2NhcGVIVE1MKHN0cikgewogIHJldHVybiBzdHIKICAgIC5yZXBsYWNlQWxsKCImIiwgIiZhbXA7IikKICAgIC5yZXBsYWNlQWxsKCI8IiwgIiZsdDsiKQogICAgLnJlcGxhY2VBbGwoIj4iLCAiJmd0OyIpCiAgICAucmVwbGFjZUFsbCgnIicsICImcXVvdDsiKQogICAgLnJlcGxhY2VBbGwoIiciLCAiJiMzOTsiKTsKfQo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+";
